{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[119],{\"+KI5\":function(e,t,r){\"use strict\";var n;r.d(t,\"a\",(function(){return n})),function(e){e[e.ACCEPTED=202]=\"ACCEPTED\",e[e.BAD_GATEWAY=502]=\"BAD_GATEWAY\",e[e.BAD_REQUEST=400]=\"BAD_REQUEST\",e[e.CONFLICT=409]=\"CONFLICT\",e[e.CONTINUE=100]=\"CONTINUE\",e[e.CREATED=201]=\"CREATED\",e[e.EXPECTATION_FAILED=417]=\"EXPECTATION_FAILED\",e[e.FAILED_DEPENDENCY=424]=\"FAILED_DEPENDENCY\",e[e.FORBIDDEN=403]=\"FORBIDDEN\",e[e.GATEWAY_TIMEOUT=504]=\"GATEWAY_TIMEOUT\",e[e.GONE=410]=\"GONE\",e[e.HTTP_VERSION_NOT_SUPPORTED=505]=\"HTTP_VERSION_NOT_SUPPORTED\",e[e.IM_A_TEAPOT=418]=\"IM_A_TEAPOT\",e[e.INSUFFICIENT_SPACE_ON_RESOURCE=419]=\"INSUFFICIENT_SPACE_ON_RESOURCE\",e[e.INSUFFICIENT_STORAGE=507]=\"INSUFFICIENT_STORAGE\",e[e.INTERNAL_SERVER_ERROR=500]=\"INTERNAL_SERVER_ERROR\",e[e.LENGTH_REQUIRED=411]=\"LENGTH_REQUIRED\",e[e.LOCKED=423]=\"LOCKED\",e[e.METHOD_FAILURE=420]=\"METHOD_FAILURE\",e[e.METHOD_NOT_ALLOWED=405]=\"METHOD_NOT_ALLOWED\",e[e.MOVED_PERMANENTLY=301]=\"MOVED_PERMANENTLY\",e[e.MOVED_TEMPORARILY=302]=\"MOVED_TEMPORARILY\",e[e.MULTI_STATUS=207]=\"MULTI_STATUS\",e[e.MULTIPLE_CHOICES=300]=\"MULTIPLE_CHOICES\",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]=\"NETWORK_AUTHENTICATION_REQUIRED\",e[e.NO_CONTENT=204]=\"NO_CONTENT\",e[e.NON_AUTHORITATIVE_INFORMATION=203]=\"NON_AUTHORITATIVE_INFORMATION\",e[e.NOT_ACCEPTABLE=406]=\"NOT_ACCEPTABLE\",e[e.NOT_FOUND=404]=\"NOT_FOUND\",e[e.NOT_IMPLEMENTED=501]=\"NOT_IMPLEMENTED\",e[e.NOT_MODIFIED=304]=\"NOT_MODIFIED\",e[e.OK=200]=\"OK\",e[e.PARTIAL_CONTENT=206]=\"PARTIAL_CONTENT\",e[e.PAYMENT_REQUIRED=402]=\"PAYMENT_REQUIRED\",e[e.PERMANENT_REDIRECT=308]=\"PERMANENT_REDIRECT\",e[e.PRECONDITION_FAILED=412]=\"PRECONDITION_FAILED\",e[e.PRECONDITION_REQUIRED=428]=\"PRECONDITION_REQUIRED\",e[e.PROCESSING=102]=\"PROCESSING\",e[e.PROXY_AUTHENTICATION_REQUIRED=407]=\"PROXY_AUTHENTICATION_REQUIRED\",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]=\"REQUEST_HEADER_FIELDS_TOO_LARGE\",e[e.REQUEST_TIMEOUT=408]=\"REQUEST_TIMEOUT\",e[e.REQUEST_TOO_LONG=413]=\"REQUEST_TOO_LONG\",e[e.REQUEST_URI_TOO_LONG=414]=\"REQUEST_URI_TOO_LONG\",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]=\"REQUESTED_RANGE_NOT_SATISFIABLE\",e[e.RESET_CONTENT=205]=\"RESET_CONTENT\",e[e.SEE_OTHER=303]=\"SEE_OTHER\",e[e.SERVICE_UNAVAILABLE=503]=\"SERVICE_UNAVAILABLE\",e[e.SWITCHING_PROTOCOLS=101]=\"SWITCHING_PROTOCOLS\",e[e.TEMPORARY_REDIRECT=307]=\"TEMPORARY_REDIRECT\",e[e.TOO_MANY_REQUESTS=429]=\"TOO_MANY_REQUESTS\",e[e.UNAUTHORIZED=401]=\"UNAUTHORIZED\",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]=\"UNAVAILABLE_FOR_LEGAL_REASONS\",e[e.UNPROCESSABLE_ENTITY=422]=\"UNPROCESSABLE_ENTITY\",e[e.UNSUPPORTED_MEDIA_TYPE=415]=\"UNSUPPORTED_MEDIA_TYPE\",e[e.USE_PROXY=305]=\"USE_PROXY\"}(n||(n={}))},\"/kpp\":function(e,t,r){\"use strict\";var n=r(\"rePB\"),a=r(\"wx14\"),o=r(\"U8pU\"),i=r(\"q1tI\"),s=r(\"TSYQ\"),c=r.n(s),u=r(\"o/2+\"),l=r(\"H84U\"),f=r(\"R3zJ\"),p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};var d=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],O=i.forwardRef((function(e,t){var r,s=i.useContext(l.b),O=s.getPrefixCls,E=s.direction,v=i.useContext(u.a),b=v.gutter,h=v.wrap,m=e.prefixCls,T=e.span,I=e.order,_=e.offset,R=e.push,N=e.pull,y=e.className,S=e.children,A=e.flex,j=e.style,C=p(e,[\"prefixCls\",\"span\",\"order\",\"offset\",\"push\",\"pull\",\"className\",\"children\",\"flex\",\"style\"]),g=O(\"col\",m),k={};d.forEach((function(t){var r,i={},s=e[t];\"number\"===typeof s?i.span=s:\"object\"===Object(o.a)(s)&&(i=s||{}),delete C[t],k=Object(a.a)(Object(a.a)({},k),(r={},Object(n.a)(r,\"\".concat(g,\"-\").concat(t,\"-\").concat(i.span),void 0!==i.span),Object(n.a)(r,\"\".concat(g,\"-\").concat(t,\"-order-\").concat(i.order),i.order||0===i.order),Object(n.a)(r,\"\".concat(g,\"-\").concat(t,\"-offset-\").concat(i.offset),i.offset||0===i.offset),Object(n.a)(r,\"\".concat(g,\"-\").concat(t,\"-push-\").concat(i.push),i.push||0===i.push),Object(n.a)(r,\"\".concat(g,\"-\").concat(t,\"-pull-\").concat(i.pull),i.pull||0===i.pull),Object(n.a)(r,\"\".concat(g,\"-rtl\"),\"rtl\"===E),r))}));var P=c()(g,(r={},Object(n.a)(r,\"\".concat(g,\"-\").concat(T),void 0!==T),Object(n.a)(r,\"\".concat(g,\"-order-\").concat(I),I),Object(n.a)(r,\"\".concat(g,\"-offset-\").concat(_),_),Object(n.a)(r,\"\".concat(g,\"-push-\").concat(R),R),Object(n.a)(r,\"\".concat(g,\"-pull-\").concat(N),N),r),y,k),x={};if(b&&b[0]>0){var U=b[0]/2;x.paddingLeft=U,x.paddingRight=U}if(b&&b[1]>0&&!Object(f.b)()){var w=b[1]/2;x.paddingTop=w,x.paddingBottom=w}return A&&(x.flex=function(e){return\"number\"===typeof e?\"\".concat(e,\" \").concat(e,\" auto\"):/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(e)?\"0 0 \".concat(e):e}(A),\"auto\"!==A||!1!==h||x.minWidth||(x.minWidth=0)),i.createElement(\"div\",Object(a.a)({},C,{style:Object(a.a)(Object(a.a)({},x),j),className:P,ref:t}),S)}));O.displayName=\"Col\",t.a=O},\"2B9q\":function(e,t,r){var n=r(\"oTAN\"),a=r(\"2Uxx\"),o=r(\"pr3w\"),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?\"[object Undefined]\":\"[object Null]\":i&&i in Object(e)?a(e):o(e)}},\"2Uxx\":function(e,t,r){var n=r(\"oTAN\"),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(c){}var a=i.call(e);return n&&(t?e[s]=r:delete e[s]),a}},\"5OYt\":function(e,t,r){\"use strict\";var n=r(\"ODXe\"),a=r(\"q1tI\"),o=r(\"ACnJ\");t.a=function(){var e=Object(a.useState)({}),t=Object(n.a)(e,2),r=t[0],i=t[1];return Object(a.useEffect)((function(){var e=o.a.subscribe((function(e){i(e)}));return function(){return o.a.unsubscribe(e)}}),[]),r}},\"94bU\":function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}},\"9ONQ\":function(e,t,r){\"use strict\";r.r(t);var n=r(\"iVi/\");function a(e,t){void 0===t&&(t={});var r=function(e){if(e&&\"j\"===e[0]&&\":\"===e[1])return e.substr(2);return e}(e);if(function(e,t){return\"undefined\"===typeof t&&(t=!e||\"{\"!==e[0]&&\"[\"!==e[0]&&'\"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(n){}return e}var o=r(\"Qetd\"),i=function(){function e(e,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return\"string\"===typeof e?n.parse(e,t):\"object\"===typeof e&&null!==e?e:{}}(e,t),new Promise((function(){r.HAS_DOCUMENT_COOKIE=\"object\"===typeof document&&\"string\"===typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=n.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),a(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var n in this.cookies)r[n]=a(this.cookies[n],e);return r},e.prototype.set=function(e,t,r){var a;\"object\"===typeof t&&(t=JSON.stringify(t)),this.cookies=o({},this.cookies,((a={})[e]=t,a)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.serialize(e,t,r)),this._emitChange({name:e,value:t,options:r})},e.prototype.remove=function(e,t){var r=t=o({},t,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=o({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.serialize(e,\"\",r)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();t.default=i},Axke:function(e,t,r){var n=r(\"g2lO\"),a=\"object\"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function(\"return this\")();e.exports=o},HtUl:function(e,t){e.exports=function(e){return null!=e&&\"object\"==typeof e}},Ma5Y:function(e,t,r){var n=r(\"9ONQ\");n=n.default||n,e.exports=function(e,t){var r=e.req&&e.req.headers&&e.req.headers.cookie;return new n(r).getAll(t)}},R3zJ:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o})),r.d(t,\"b\",(function(){return i}));var n,a=r(\"MNnm\"),o=function(){return Object(a.a)()&&window.document.documentElement},i=function(){if(!o())return!1;if(void 0!==n)return n;var e=document.createElement(\"div\");return e.style.display=\"flex\",e.style.flexDirection=\"column\",e.style.rowGap=\"1px\",e.appendChild(document.createElement(\"div\")),e.appendChild(document.createElement(\"div\")),document.body.appendChild(e),n=1===e.scrollHeight,document.body.removeChild(e),n}},X4ip:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),i=r(\"1OyB\"),s=r(\"vuIU\"),c=r(\"JX7q\"),u=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),p=r(\"rePB\"),d=r(\"q1tI\"),O=r(\"CLrh\"),E=r(\"TSYQ\"),v=r.n(E),b=r(\"HQdG\"),h=r(\"MoJi\"),m=(r(\"8Gf7\"),d.createElement);function T(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var I=function(e){Object(u.a)(r,e);var t=T(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(p.a)(Object(c.a)(e),\"streamId\",void 0),Object(p.a)(Object(c.a)(e),\"activeStreams\",[]),e}return Object(s.a)(r,[{key:\"handler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,o=n.webRTCAdaptor,i=n.settings,t!==h.a.INITIALIZED){e.next=8;break}return e.next=4,O.p.getSubscriberToken({streamId:this.streamId,settings:i});case 4:s=e.sent,o.play(this.streamId,s),e.next=25;break;case 8:if(t!==h.a.NEW_STREAM_AVAILABLE){e.next=13;break}this.activeStreams.find((function(e){return e===r.streamId}))||(this.activeStreams.push(r.streamId),this.createRemoteVideo(r.stream)),e.next=25;break;case 13:if(t!==h.a.PLAY_FINISHED){e.next=19;break}this.activeStreams=this.activeStreams.filter((function(e){return e!==r.streamId})),this.removeRemoteVideo(),setTimeout((function(){o.getStreamInfo(r.streamId)}),3e3),e.next=25;break;case 19:if(t!==h.a.STREAM_INFORMATION){e.next=25;break}if(r.streamId!==this.streamId){e.next=25;break}return e.next=23,O.p.getSubscriberToken({streamId:r.streamId,settings:i});case 23:c=e.sent,o.play(r.streamId,c);case 25:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"cbErrorHandler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"no_stream_exist\"===t&&(r=this.props,n=r.webRTCAdaptor,o=r.initWebRTCAdaptor,n?this.streamId&&n.getStreamInfo(this.streamId):o(this.handler.bind(this),this.cbErrorHandler.bind(this)));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"createRemoteVideo\",value:function(e){var t=this.props.classNames,r=document.createElement(\"video\");r.setAttribute(\"id\",\"private-subscriber\"),r.setAttribute(\"class\",v()(\"video-js\",t)),r.autoplay=!0,r.muted=!0,r.controls=!0,r.playsInline=!0,r.srcObject=e,document.querySelector(\".private-streaming-container\").append(r)}},{key:\"removeRemoteVideo\",value:function(){var e=document.getElementById(\"private-subscriber\");e&&(e.srcObject=null,document.querySelector(\".private-streaming-container\").removeChild(e))}},{key:\"play\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.initWebRTCAdaptor,o=r.initialized,i=r.webRTCAdaptor,s=r.settings,!o){e.next=7;break}return e.next=4,O.p.getSubscriberToken({streamId:t,settings:s});case 4:return c=e.sent,i.play(t,c),e.abrupt(\"return\");case 7:this.streamId=t,n(this.handler.bind(this),this.cbErrorHandler.bind(this));case 9:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"close\",value:function(){this.streamId=null}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){return m(d.Fragment,null)}}]),r}(d.PureComponent);t.a=Object(b.a)(I)},g2lO:function(e,t,r){(function(t){var r=\"object\"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(\"yLpj\"))},\"iVi/\":function(e,t,r){\"use strict\";t.parse=function(e,t){if(\"string\"!==typeof e)throw new TypeError(\"argument str must be a string\");for(var r={},a=t||{},i=e.split(o),c=a.decode||n,u=0;u<i.length;u++){var l=i[u],f=l.indexOf(\"=\");if(!(f<0)){var p=l.substr(0,f).trim(),d=l.substr(++f,l.length).trim();'\"'==d[0]&&(d=d.slice(1,-1)),void 0==r[p]&&(r[p]=s(d,c))}}return r},t.serialize=function(e,t,r){var n=r||{},o=n.encode||a;if(\"function\"!==typeof o)throw new TypeError(\"option encode is invalid\");if(!i.test(e))throw new TypeError(\"argument name is invalid\");var s=o(t);if(s&&!i.test(s))throw new TypeError(\"argument val is invalid\");var c=e+\"=\"+s;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error(\"maxAge should be a Number\");c+=\"; Max-Age=\"+Math.floor(u)}if(n.domain){if(!i.test(n.domain))throw new TypeError(\"option domain is invalid\");c+=\"; Domain=\"+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError(\"option path is invalid\");c+=\"; Path=\"+n.path}if(n.expires){if(\"function\"!==typeof n.expires.toUTCString)throw new TypeError(\"option expires is invalid\");c+=\"; Expires=\"+n.expires.toUTCString()}n.httpOnly&&(c+=\"; HttpOnly\");n.secure&&(c+=\"; Secure\");if(n.sameSite){switch(\"string\"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+=\"; SameSite=Strict\";break;case\"lax\":c+=\"; SameSite=Lax\";break;case\"strict\":c+=\"; SameSite=Strict\";break;case\"none\":c+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return c};var n=decodeURIComponent,a=encodeURIComponent,o=/; */,i=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function s(e,t){try{return t(e)}catch(r){return e}}},\"o/2+\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a=Object(n.createContext)({});t.a=a},oTAN:function(e,t,r){var n=r(\"Axke\").Symbol;e.exports=n},pr3w:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},qrJ5:function(e,t,r){\"use strict\";var n=r(\"wx14\"),a=r(\"rePB\"),o=r(\"U8pU\"),i=r(\"ODXe\"),s=r(\"q1tI\"),c=r(\"TSYQ\"),u=r.n(c),l=r(\"H84U\"),f=r(\"o/2+\"),p=r(\"CWQg\"),d=r(\"ACnJ\"),O=r(\"R3zJ\"),E=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},v=(Object(p.a)(\"top\",\"middle\",\"bottom\",\"stretch\"),Object(p.a)(\"start\",\"end\",\"center\",\"space-around\",\"space-between\"),s.forwardRef((function(e,t){var r,c=e.prefixCls,p=e.justify,v=e.align,b=e.className,h=e.style,m=e.children,T=e.gutter,I=void 0===T?0:T,_=e.wrap,R=E(e,[\"prefixCls\",\"justify\",\"align\",\"className\",\"style\",\"children\",\"gutter\",\"wrap\"]),N=s.useContext(l.b),y=N.getPrefixCls,S=N.direction,A=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),j=Object(i.a)(A,2),C=j[0],g=j[1],k=s.useRef(I);s.useEffect((function(){var e=d.a.subscribe((function(e){var t=k.current||0;(!Array.isArray(t)&&\"object\"===Object(o.a)(t)||Array.isArray(t)&&(\"object\"===Object(o.a)(t[0])||\"object\"===Object(o.a)(t[1])))&&g(e)}));return function(){return d.a.unsubscribe(e)}}),[]);var P=y(\"row\",c),x=function(){var e=[0,0];return(Array.isArray(I)?I:[I,0]).forEach((function(t,r){if(\"object\"===Object(o.a)(t))for(var n=0;n<d.b.length;n++){var a=d.b[n];if(C[a]&&void 0!==t[a]){e[r]=t[a];break}}else e[r]=t||0})),e}(),U=u()(P,(r={},Object(a.a)(r,\"\".concat(P,\"-no-wrap\"),!1===_),Object(a.a)(r,\"\".concat(P,\"-\").concat(p),p),Object(a.a)(r,\"\".concat(P,\"-\").concat(v),v),Object(a.a)(r,\"\".concat(P,\"-rtl\"),\"rtl\"===S),r),b),w={},D=x[0]>0?x[0]/-2:void 0,L=x[1]>0?x[1]/-2:void 0;if(w.marginLeft=D,w.marginRight=D,Object(O.b)()){var M=Object(i.a)(x,2);w.rowGap=M[1]}else w.marginTop=L,w.marginBottom=L;return s.createElement(f.a.Provider,{value:{gutter:x,wrap:_}},s.createElement(\"div\",Object(n.a)({},R,{className:U,style:Object(n.a)(Object(n.a)({},w),h),ref:t}),m))})));v.displayName=\"Row\",t.a=v},rOPN:function(e,t,r){\"use strict\";r.r(t);var n,a=r(\"wx14\"),o=r(\"o0o1\"),i=r.n(o),s=r(\"HaE+\"),c=r(\"1OyB\"),u=r(\"vuIU\"),l=r(\"JX7q\"),f=r(\"Ji7U\"),p=r(\"md7G\"),d=r(\"foSv\"),O=r(\"rePB\"),E=r(\"q1tI\"),v=r.n(E),b=r(\"8Kt/\"),h=r.n(b),m=r(\"VXEj\"),T=r(\"BMrR\"),I=r(\"kPKH\"),_=r(\"tsqr\"),R=r(\"2/Rp\"),N=r(\"nOHt\"),y=r.n(N),S=r(\"CLrh\"),A=r(\"/MKj\"),j=r(\"gxiY\"),C=r(\"x7is\"),g=r(\"AY7M\"),k=r(\"Ma5Y\"),P=r.n(k),x=r(\"L/eJ\"),U=r(\"NsEo\"),w=r(\"yXQx\"),D=r(\"X4ip\"),L=r(\"+KI5\"),M=v.a.createElement;function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(O.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(p.a)(this,r)}}!function(e){e.JOINED_THE_ROOM=\"JOINED_THE_ROOM\",e.JOIN_ROOM=\"JOIN_ROOM\",e.LEAVE_ROOM=\"LEAVE_ROOM\",e.STREAM_INFORMATION_CHANGED=\"private-stream/streamInformationChanged\",e.MODEL_JOIN_ROOM=\"MODEL_JOIN_ROOM\",e.SEND_PAID_TOKEN=\"SEND_PAID_TOKEN\"}(n||(n={}));var B=function(e){var t=e.description,r=e.title;return M(m.b.Item,null,M(T.a,{style:{width:\"100%\"}},M(I.a,{className:\"light-text\",sm:{span:6},xs:{span:12}},r),M(I.a,{style:{fontWeight:\"bold\"},sm:{span:18},xs:{span:12}},t)))},G=function(e){Object(f.a)(r,e);var t=J(r);function r(e){var n;return Object(c.a)(this,r),n=t.call(this,e),Object(O.a)(Object(l.a)(n),\"publisherRef\",void 0),Object(O.a)(Object(l.a)(n),\"subscriberRef\",void 0),Object(O.a)(Object(l.a)(n),\"localVideoId\",\"private-publisher\"),Object(O.a)(Object(l.a)(n),\"remoteVideoContainer\",\"private-streaming-container\"),Object(O.a)(Object(l.a)(n),\"interval\",void 0),Object(O.a)(Object(l.a)(n),\"socket\",void 0),Object(O.a)(Object(l.a)(n),\"onbeforeunload\",(function(){n.leaveSession()})),n.state={processing:!1,roomJoined:!1,total:0,callTime:0,paidToken:0,members:[],streamId:\"\",streamList:[]},n}return Object(u.a)(r,[{key:\"componentDidMount\",value:function(){this.publisherRef=v.a.createRef(),this.subscriberRef=v.a.createRef(),this.socket=this.context,window.addEventListener(\"beforeunload\",this.onbeforeunload),y.a.events.on(\"routeChangeStart\",this.onbeforeunload)}},{key:\"componentDidUpdate\",value:function(e){var t,r=this.props.activeConversation;null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t._id&&r!==e.activeConversation&&this.initSocketEvent()}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),y.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({total:r,members:n})}},{key:\"handleModelJoinRoom\",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n,a,o,s,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.conversationId,_.b.success(\"Model joined the room!\"),a=this.props,o=a.activeConversation,s=a.performer,c=a.user,null!==o&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r._id&&o.data._id===n&&(c.balance<s.privateCallPrice?(_.b.warn(\"Your balance is not enough token.\"),setTimeout((function(){return window.location.reload()}),5e3)):this.interval=setInterval((function(){var e=u.state.callTime;u.setState({callTime:e+1}),u.sendPaidToken(n)}),6e4));case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"leaveSession\",value:function(){var e=this.props,t=e.activeConversation;(0,e.resetStreamMessage)(),this.socket&&t&&t.data&&(this.socket.off(\"JOINED_THE_ROOM\"),this.socket.off(\"private-stream/streamJoined\"),this.socket.off(\"private-stream/streamLeaved\"),this.socket.emit(n.LEAVE_ROOM,{conversationId:t.data._id})),this.interval&&clearInterval(this.interval),this.setState({processing:!1,roomJoined:!1,total:0,members:[]})}},{key:\"sendRequest\",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,r,a,o,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.performer,a=t.getStreamConversationSuccess,e.prev=1,this.setState({processing:!0}),e.next=5,S.p.requestPrivateChat(r._id);case 5:o=e.sent,s=o.data,c=s.sessionId,u=s.conversation,this.socket=this.context,_.b.success(\"Private request has been sent!\"),this.publisherRef.current&&this.publisherRef.current.start(u._id,c),this.socket.emit(n.JOIN_ROOM,{conversationId:u._id}),a({data:u}),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,Promise.resolve(e.t0);case 18:l=e.sent,_.b.error(Object(U.g)(l));case 20:return e.prev=20,this.setState({processing:!1}),e.finish(20);case 23:case\"end\":return e.stop()}}),e,this,[[1,14,20,23]])})));return function(){return e.apply(this,arguments)}}()},{key:\"roomJoinedHandler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({total:r,members:n,roomJoined:!0,callTime:0})}},{key:\"leave\",value:function(){this.publisherRef.current&&this.publisherRef.current.stop(),this.subscriberRef.current&&this.subscriberRef.current.stop(),setTimeout((function(){window.location.href=\"/\"}),1e4)}},{key:\"sendPaidToken\",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=this.props,n=r.performer,a=r.updateCurrentUser,o=this.state.paidToken,e.next=5,S.r.sendPaidToken(t);case 5:s={paidToken:o+n.privateCallPrice},this.setState(s),a(-1*n.privateCallPrice),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Promise.resolve(e.t0);case 14:400===e.sent.statusCode&&(_.b.error(\"Your tokens do not enough, please buy more.\"),clearInterval(this.interval),this.leave());case 16:case\"end\":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"initSocketEvent\",value:function(){var e=this;this.socket=this.context,this.socket.on(\"JOINED_THE_ROOM\",(function(t){var r=t.streamId,n=t.streamList;t.conversationId===e.props.activeConversation.data._id&&(e.setState({streamId:r,streamList:n}),e.publisherRef.current&&e.publisherRef.current.publish(r))})),this.socket.on(\"private-stream/streamJoined\",(function(t){e.state.streamId!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.play(t.streamId)})),this.socket.on(\"private-stream/streamLeaved\",(function(t){var r=e.state,n=r.streamList,a=r.streamId,o=e.props.performer;e.setState({streamList:n.filter((function(e){return e!==t.streamId}))}),a!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.close(),_.b.error(\"Private call has ended.\"),window.setTimeout((function(){y.a.push({pathname:\"/stream\",query:{performer:JSON.stringify(o)}},\"/profile/\".concat(o.username))}),1e3)}))}},{key:\"render\",value:function(){var e=this.props.performer,t=this.state,r=t.processing,o=t.total,i=t.members,s=t.roomJoined,c=t.callTime,u=t.paidToken,l=[{title:\"Call time\",description:\"\".concat(c,\" minute(s)\")},{title:\"Status\",description:s?\"Live\":\"\"},{title:\"Paid Token\",description:\"\".concat(u,\" token(s)\")},{title:\"Token per minute\",description:\"\".concat(e.privateCallPrice,\" token(s)\")||!1}];return M(v.a.Fragment,null,M(h.a,null,M(\"title\",null,\"Private Chat\")),M(g.a,{event:n.STREAM_INFORMATION_CHANGED,handler:this.handler.bind(this)}),M(g.a,{event:n.JOINED_THE_ROOM,handler:this.roomJoinedHandler.bind(this)}),M(g.a,{event:n.MODEL_JOIN_ROOM,handler:this.handleModelJoinRoom.bind(this)}),M(\"div\",{className:\"container\"},M(T.a,null,M(I.a,{md:12,xs:24},s?M(R.a,{type:\"primary\",onClick:this.leave.bind(this),block:!0,disabled:r},\"Stop Streaming\"):M(R.a,{type:\"primary\",onClick:this.sendRequest.bind(this),loading:r,block:!0},\"Send Private Call Request\"),M(\"div\",{className:\"private-streaming-container\"},M(w.a,Object(a.a)({},this.props,{ref:this.publisherRef,configs:{localVideoId:\"private-publisher\"}})),M(D.a,Object(a.a)({},this.props,{ref:this.subscriberRef,configs:{isPlayMode:!0}}))),M(m.b,{dataSource:l,renderItem:function(e){return M(B,{description:e.description,title:e.title})}})),M(I.a,{xs:24,md:12},M(x.a,Object(a.a)({},this.props,{totalParticipant:o,members:i}))))))}}],[{key:\"getInitialProps\",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n,a,o,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ctx,e.prev=1,!(n=r.query).performer){e.next=5;break}return e.abrupt(\"return\",{performer:JSON.parse(n.performer)});case 5:return a=P()(r),o=a.token,s={Authorization:o},e.next=9,S.j.details(n.username,s);case 9:if(c=e.sent,!(u=c.data).isBlocked){e.next=13;break}throw L.a.FORBIDDEN;case 13:return e.abrupt(\"return\",{performer:u});case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt(\"return\",y.a.push(\"/\"));case 20:return r.res.writeHead&&r.res.writeHead(302,{Location:\"/\"}),r.res.end&&r.res.end(),e.abrupt(\"return\",{});case 23:case\"end\":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(E.PureComponent);Object(O.a)(G,\"authenticate\",!0),G.contextType=g.c;var Y={getStreamConversationSuccess:j.e,resetStreamMessage:j.l,updateCurrentUser:C.m};t.default=Object(A.b)((function(e){return F(F({},e.streaming),{},{ui:e.ui,user:e.user.current,loggedIn:e.auth.loggedIn,activeConversation:e.streamMessage.activeConversation})}),Y)(Object(N.withRouter)(G))},x7is:function(e,t,r){\"use strict\";r.d(t,\"m\",(function(){return a})),r.d(t,\"n\",(function(){return o})),r.d(t,\"o\",(function(){return i})),r.d(t,\"p\",(function(){return c})),r.d(t,\"r\",(function(){return u})),r.d(t,\"q\",(function(){return l})),r.d(t,\"l\",(function(){return f})),r.d(t,\"k\",(function(){return p})),r.d(t,\"a\",(function(){return d})),r.d(t,\"b\",(function(){return E})),r.d(t,\"d\",(function(){return v})),r.d(t,\"c\",(function(){return b})),r.d(t,\"i\",(function(){return h})),r.d(t,\"j\",(function(){return m})),r.d(t,\"e\",(function(){return I})),r.d(t,\"g\",(function(){return _})),r.d(t,\"f\",(function(){return R})),r.d(t,\"h\",(function(){return N}));var n=r(\"vo7w\"),a=Object(n.a)(\"updateCurrentUser\"),o=Object(n.a)(\"updateCurrentUserAvatar\"),i=Object(n.a)(\"updateCurrentUserBalance\"),s=Object(n.b)(\"updateUser\",\"UPDATE_USER\"),c=s.updateUser,u=s.updateUserSuccess,l=s.updateUserFail,f=Object(n.a)(\"updatingUser\"),p=Object(n.a)(\"setUserReducer\"),d=Object(n.a)(\"buyTokenSuccess\"),O=Object(n.b)(\"getFavoritePerformers\",\"GET_FAVOURITE\"),E=O.getFavoritePerformers,v=O.getFavoritePerformersSuccess,b=O.getFavoritePerformersFailed,h=Object(n.a)(\"GETTING_FAVORITE\"),m=Object(n.a)(\"REMOVE_FAVORITE\"),T=Object(n.b)(\"getPaymentTokenHistroy\",\"GET_PAYMET_TOKE_HISTORY\"),I=T.getPaymentTokenHistroy,_=T.getPaymentTokenHistroySuccess,R=T.getPaymentTokenHistroyFail,N=Object(n.a)(\"GETTING_PAYMET_TOKE_HISTORY\")},xKex:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/stream/webrtc/privatechat\",function(){return r(\"rOPN\")}])},yXQx:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),i=r(\"1OyB\"),s=r(\"vuIU\"),c=r(\"JX7q\"),u=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),p=r(\"rePB\"),d=r(\"CLrh\"),O=r(\"nOHt\"),E=r.n(O),v=r(\"q1tI\"),b=r.n(v),h=r(\"HQdG\"),m=r(\"MoJi\"),T=r(\"AY7M\"),I=(r(\"8Gf7\"),b.a.createElement);function _(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var R=function(e){Object(u.a)(r,e);var t=_(r);function r(e){var n;return Object(i.a)(this,r),n=t.call(this,e),Object(p.a)(Object(c.a)(n),\"socket\",void 0),Object(p.a)(Object(c.a)(n),\"onbeforeunload\",(function(){var e=n.props,t=e.publish_started,r=e.webRTCAdaptor,a=n.state,o=a.conversationId,i=a.streamId;t&&(r&&r.leaveFromRoom(o),n.socket.emit(\"private-stream/leave\",{conversationId:o,streamId:i}))})),n.state={conversationId:\"\"},n}return Object(s.a)(r,[{key:\"componentDidMount\",value:function(){this.socket=this.context,E.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),E.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,i,s,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.webRTCAdaptor,o=r.settings,i=this.state,s=i.conversationId,c=i.streamId,t!==m.a.INITIALIZED){e.next=6;break}n.joinRoom(s,c),e.next=14;break;case 6:if(t!==m.a.JOINED_THE_ROOM){e.next=13;break}return e.next=9,d.p.getPublishToken({streamId:c,settings:o});case 9:u=e.sent,n.publish(c,u),e.next=14;break;case 13:\"publish_started\"===t?this.socket.emit(\"private-stream/join\",{conversationId:s,streamId:c}):\"publish_finished\"===t&&this.socket.emit(\"private-stream/leave\",{conversationId:s,streamId:c});case 14:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"start\",value:function(e){this.setState({conversationId:e})}},{key:\"publish\",value:function(e){var t=this.props.initWebRTCAdaptor;this.setState({streamId:e}),t(this.handler.bind(this))}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){var e=this.props.publish_started;return I(\"video\",{id:\"private-publisher\",hidden:!e,autoPlay:!0,playsInline:!0,muted:!0})}}]),r}(v.PureComponent);R.contextType=T.c,t.a=Object(h.a)(R)}},[[\"xKex\",0,1,4,5,3,2,6,7,8,10,11,12,13,14,15,16,17,20,22,23,25,26,29,30,37,9]]]);","extractedComments":[]}
{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[103,41],{\"/kpp\":function(e,t,n){\"use strict\";var r=n(\"rePB\"),a=n(\"wx14\"),o=n(\"U8pU\"),i=n(\"q1tI\"),s=n(\"TSYQ\"),c=n.n(s),u=n(\"o/2+\"),l=n(\"H84U\"),d=n(\"R3zJ\"),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var p=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],v=i.forwardRef((function(e,t){var n,s=i.useContext(l.b),v=s.getPrefixCls,b=s.direction,m=i.useContext(u.a),h=m.gutter,O=m.wrap,g=e.prefixCls,y=e.span,j=e.order,R=e.offset,w=e.push,S=e.pull,I=e.className,C=e.children,E=e.flex,_=e.style,k=f(e,[\"prefixCls\",\"span\",\"order\",\"offset\",\"push\",\"pull\",\"className\",\"children\",\"flex\",\"style\"]),x=v(\"col\",g),P={};p.forEach((function(t){var n,i={},s=e[t];\"number\"===typeof s?i.span=s:\"object\"===Object(o.a)(s)&&(i=s||{}),delete k[t],P=Object(a.a)(Object(a.a)({},P),(n={},Object(r.a)(n,\"\".concat(x,\"-\").concat(t,\"-\").concat(i.span),void 0!==i.span),Object(r.a)(n,\"\".concat(x,\"-\").concat(t,\"-order-\").concat(i.order),i.order||0===i.order),Object(r.a)(n,\"\".concat(x,\"-\").concat(t,\"-offset-\").concat(i.offset),i.offset||0===i.offset),Object(r.a)(n,\"\".concat(x,\"-\").concat(t,\"-push-\").concat(i.push),i.push||0===i.push),Object(r.a)(n,\"\".concat(x,\"-\").concat(t,\"-pull-\").concat(i.pull),i.pull||0===i.pull),Object(r.a)(n,\"\".concat(x,\"-rtl\"),\"rtl\"===b),n))}));var A=c()(x,(n={},Object(r.a)(n,\"\".concat(x,\"-\").concat(y),void 0!==y),Object(r.a)(n,\"\".concat(x,\"-order-\").concat(j),j),Object(r.a)(n,\"\".concat(x,\"-offset-\").concat(R),R),Object(r.a)(n,\"\".concat(x,\"-push-\").concat(w),w),Object(r.a)(n,\"\".concat(x,\"-pull-\").concat(S),S),n),I,P),T={};if(h&&h[0]>0){var N=h[0]/2;T.paddingLeft=N,T.paddingRight=N}if(h&&h[1]>0&&!Object(d.b)()){var M=h[1]/2;T.paddingTop=M,T.paddingBottom=M}return E&&(T.flex=function(e){return\"number\"===typeof e?\"\".concat(e,\" \").concat(e,\" auto\"):/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(e)?\"0 0 \".concat(e):e}(E),\"auto\"!==E||!1!==O||T.minWidth||(T.minWidth=0)),i.createElement(\"div\",Object(a.a)({},k,{style:Object(a.a)(Object(a.a)({},T),_),className:A,ref:t}),C)}));v.displayName=\"Col\",t.a=v},\"6cGi\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o}));var r=n(\"ODXe\"),a=n(\"q1tI\");function o(e,t){var n=t||{},o=n.defaultValue,i=n.value,s=n.onChange,c=n.postState,u=a.useState((function(){return void 0!==i?i:void 0!==o?\"function\"===typeof o?o():o:\"function\"===typeof e?e():e})),l=Object(r.a)(u,2),d=l[0],f=l[1],p=void 0!==i?i:d;c&&(p=c(p));var v=a.useRef(!0);return a.useEffect((function(){v.current?v.current=!1:void 0===i&&f(i)}),[i]),[p,function(e){f(e),p!==e&&s&&s(e,p)}]}},\"8Skl\":function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z\"}}]},name:\"down\",theme:\"outlined\"},o=n(\"6VBw\"),i=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"DownOutlined\";t.a=r.forwardRef(i)},A9Xj:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/live/privatechat\",function(){return n(\"aQHu\")}])},Dx9A:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"defs\",attrs:{},children:[{tag:\"style\",attrs:{}}]},{tag:\"path\",attrs:{d:\"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z\"}}]},name:\"send\",theme:\"outlined\"},o=n(\"6VBw\"),i=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"SendOutlined\";t.a=r.forwardRef(i)},HQdG:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return E}));var r=n(\"o0o1\"),a=n.n(r),o=n(\"HaE+\"),i=n(\"wx14\"),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"JX7q\"),l=n(\"Ji7U\"),d=n(\"md7G\"),f=n(\"foSv\"),p=n(\"rePB\"),v=n(\"q1tI\"),b=n.n(v),m=n(\"nOHt\"),h=n.n(m),O=n(\"fsrY\"),g=n(\"tsqr\"),y=n(\"psLn\"),j=n(\"XwMy\"),R=n(\"MoJi\"),w=b.a.createElement;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function E(e){var t=function(t){Object(l.a)(r,t);var n=C(r);function r(e){var t;Object(s.a)(this,r),t=n.call(this,e),Object(p.a)(Object(u.a)(t),\"webRTCAdaptor\",void 0),Object(p.a)(Object(u.a)(t),\"autoRepublishIntervalJob\",void 0),Object(p.a)(Object(u.a)(t),\"onbeforeunload\",(function(){t.leaveSession()}));var a=t.props.sessionId;return t.state={initialized:!1,publish_started:!1,streamId:a},t}return Object(c.a)(r,[{key:\"componentDidMount\",value:function(){this.props.initImmediately&&this.initWebRTCAdaptor(),h.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),h.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"leaveSession\",value:function(){var e=this.state,t=e.streamId,n=e.publish_started,r=e.initialized,a=this.props.configs.isPlayMode;this.autoRepublishIntervalJob&&window.clearInterval(this.autoRepublishIntervalJob),this.webRTCAdaptor&&r&&(n&&t&&this.webRTCAdaptor.stop(t),!a&&this.webRTCAdaptor.closeStream(),this.webRTCAdaptor.closePeerConnection(),this.webRTCAdaptor.closeWebSocket(),this.webRTCAdaptor=void 0),this.setState({streamId:\"\",initialized:!1})}},{key:\"initWebRTCAdaptor\",value:function(e,t){var n=this,r=this.props,a=r.configs,o=r.settings,i=r.autoRepublishDisabled,s=r.callback,c=a.isPlayMode,u=j.a.debug,l=c?o[O.a.SUBSCRIBER_URL]:o[O.a.PUBLISHER_URL];if(l){if(this.webRTCAdaptor||!i){var d=a.appName||o.AntMediaAppname,f=\"\".concat(l,\"/\").concat(d,\"/websocket\"),p=\"ws://\".concat(f);window.location.protocol.startsWith(\"https\")&&(p=\"wss://\".concat(f)),this.setState({cb:e,cbError:t}),this.webRTCAdaptor=new window.WebRTCAdaptor(I(I({websocket_url:p,mediaConstraints:{video:!0,audio:!0},debug:u,peerconnection_config:{iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},sdp_constraints:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},bandwidth:j.a.maxVideoBitrateKbps,isPlayMode:!1},a),{},{callback:function(t,r){if(\"initialized\"===t)n.setState({initialized:!0});else if(\"publish_started\"===t)n.setState({publish_started:!0,streamId:r.streamId}),n.autoRepublishIntervalJob||i||(n.autoRepublishIntervalJob=setInterval(n.checkAndRepublishIfRequired.bind(n),5e3));else if(\"publish_finished\"===t)n.setState({publish_started:!1,streamId:\"\"});else if(t===R.a.ICE_CONNECTION_STATE_CHANGED)n.setState({iceConnectionState:r.state});else if(t===R.a.REFRESH_CONNECTION){n.state.publish_started&&!i&&n.checkAndRepublishIfRequired()}else t===R.a.CLOSED&&\"undefined\"!==typeof r&&console.log(\"Connecton closed: \".concat(JSON.stringify(r)));s&&\"function\"===typeof s&&s(t,r),e&&\"function\"===typeof e&&e(t,r)},callbackError:function(e,r){t&&\"function\"===typeof t&&t(e,r),n.callbackError(e,r)}}))}}else g.b.error(\"Undefined WebsocketURL!\")}},{key:\"checkAndRepublishIfRequired\",value:function(){var e=this.state,t=e.streamId,n=e.cb,r=e.cbError;if(this.webRTCAdaptor&&t){var a=this.webRTCAdaptor.iceConnectionState(t);null!=a&&\"failed\"!==a&&\"disconnected\"!==a||(this.webRTCAdaptor.stop(t),this.webRTCAdaptor.closePeerConnection(t),this.webRTCAdaptor.closeWebSocket(),this.initWebRTCAdaptor(n,r))}}},{key:\"callbackError\",value:function(e,t){\"error callback: \".concat(JSON.stringify(e));var n=JSON.stringify(e);if(\"undefined\"!==typeof t)return n=t,void g.b.error(n);n=-1!==n.indexOf(\"NotFoundError\")?\"Camera or Mic are not found or not allowed in your device\":-1!==n.indexOf(\"NotReadableError\")||-1!==n.indexOf(\"TrackStartError\")?\"Camera or Mic is being used by some other process that does not let read the devices\":-1!==n.indexOf(\"OverconstrainedError\")||-1!==n.indexOf(\"ConstraintNotSatisfiedError\")?\"There is no device found that fits your video and audio constraints. You may change video and audio constraints\":-1!==n.indexOf(\"NotAllowedError\")||-1!==n.indexOf(\"PermissionDeniedError\")?\"You are not allowed to access camera and mic.\":-1!==n.indexOf(\"TypeError\")?\"Video/Audio is required\":-1!==n.indexOf(\"ScreenSharePermissionDenied\")?\"You are not allowed to access screen share\":-1!==n.indexOf(\"WebSocketNotConnected\")?\"WebSocket Connection is disconnected.\":-1!==n.indexOf(\"unauthorized_access\")?\"Access Denied. You don\\u2019t have permission to access\":\"\";var r=Object(y.h)();n&&g.b.error({content:n,key:r,onClick:function(){return g.b.destroy(r)}})}},{key:\"render\",value:function(){var t=this.props.forwardedRef;return w(e,Object(i.a)({},this.props,this.state,{webRTCAdaptor:this.webRTCAdaptor,initWebRTCAdaptor:this.initWebRTCAdaptor.bind(this),leaveSession:this.leaveSession.bind(this),ref:t}))}}],[{key:\"getInitialProps\",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.getInitialProps,!t.t0){t.next=5;break}return t.next=4,e.getInitialProps(n);case 4:t.t0=t.sent;case 5:return r=t.t0,t.abrupt(\"return\",I({},r));case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),r}(b.a.Component);return b.a.forwardRef((function(e,n){return w(t,Object(i.a)({},e,{forwardedRef:n}))}))}},\"L/eJ\":function(e,t,n){\"use strict\";var r,a=n(\"ZTPi\"),o=n(\"q1tI\"),i=n.n(o),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"Ji7U\"),l=n(\"md7G\"),d=n(\"foSv\"),f=n(\"TSYQ\"),p=n.n(f),v=(n(\"OVUx\"),n(\"/MKj\")),b=n(\"gxiY\"),m=n(\"o0o1\"),h=n.n(m),O=n(\"HaE+\"),g=n(\"JX7q\"),y=n(\"rePB\"),j=n(\"wd/R\"),R=n.n(j),w=n(\"YFqc\"),S=n.n(w),I=(n(\"UTbA\"),n(\"AY7M\")),C=n(\"5rEg\"),E=n(\"tsqr\"),_=n(\"Dx9A\"),k=n(\"a6RD\"),x=n.n(k),P=(n(\"qMfs\"),i.a.createElement);function A(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}r=x()((function(){return n.e(51).then(n.t.bind(null,\"x/1y\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"x/1y\"]},modules:[\"emoji-picker-react\"]}});var T=function(e){Object(u.a)(n,e);var t=A(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(y.a)(Object(g.a)(r),\"uploadRef\",void 0),r.uploadRef=i.a.createRef(),r}return Object(c.a)(n,[{key:\"onEmojiClick\",value:function(e,t){var n=this.props.onEmojiClick;n(t)}},{key:\"render\",value:function(){return P(i.a.Fragment,null,P(r,{onEmojiClick:this.onEmojiClick.bind(this),disableAutoFocus:!0,disableSearchBar:!0,disableSkinTonePicker:!0}))}}]),n}(o.PureComponent),N=i.a.createElement;function M(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var L=C.a.TextArea,D=function(e){Object(u.a)(n,e);var t=M(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(y.a)(Object(g.a)(r),\"uploadRef\",void 0),Object(y.a)(Object(g.a)(r),\"_input\",void 0),Object(y.a)(Object(g.a)(r),\"state\",{text:\"\"}),Object(y.a)(Object(g.a)(r),\"onKeyDown\",(function(e){13===e.keyCode&&r.send()})),Object(y.a)(Object(g.a)(r),\"onChange\",(function(e){r.setText(e.target.value)})),Object(y.a)(Object(g.a)(r),\"onEmojiClick\",(function(e){var t=r.state.text;r.setText(t+e.emoji)})),r.uploadRef=i.a.createRef(),r}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){this.uploadRef||(this.uploadRef=i.a.createRef()),this._input||(this._input=i.a.createRef())}},{key:\"componentDidUpdate\",value:function(e){this.props.sendMessage.success!==e.sendMessage.success&&(this.setText(\"\"),this._input&&this._input.focus())}},{key:\"setText\",value:function(e){this.setState({text:e})}},{key:\"send\",value:function(){var e=this.state.text;if(this.props.loggedIn){if(e){var t=this.props,n=t.conversation,r=t.isPublic;(0,t.sendStreamMessage)({conversationId:n._id,data:{text:e},type:n.type,isPublic:r})}}else E.b.error(\"Please login\")}},{key:\"render\",value:function(){var e=this,t=this.props.loggedIn,n=this.state.text,r=this.props,a=r.sendMessage,o=r.conversation;return this.uploadRef||(this.uploadRef=i.a.createRef()),this._input||(this._input=i.a.createRef()),N(\"div\",{className:\"compose\",hidden:!t||!o._id},N(L,{value:n,className:\"compose-input\",placeholder:\"Enter message here.\",onKeyDown:this.onKeyDown,onChange:this.onChange,disabled:a.sending,autoFocus:!0,ref:function(t){return e._input=t},rows:1}),N(\"div\",{className:\"grp-icons\"},N(_.a,{onClick:this.send.bind(this),style:{fontSize:\"25px\",marginRight:\"10px\",color:\"#fe26b3\"}}),N(\"div\",{className:\"grp-emotions\"},N(\"img\",{src:\"/emotion-ico.png\",width:\"25px\",alt:\"\"}),N(T,{onEmojiClick:this.onEmojiClick.bind(this)}))))}}]),n}(o.PureComponent),U={sendStreamMessage:b.m},B=Object(v.b)((function(e){return{loggedIn:e.auth.loggedIn,sendMessage:e.streamMessage.sendMessage}}),U)(D),q=n(\"+YFz\"),H={icon:function(e,t){return{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z\",fill:t}},{tag:\"path\",attrs:{d:\"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z\",fill:t}},{tag:\"path\",attrs:{d:\"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z\",fill:e}},{tag:\"path\",attrs:{d:\"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z\",fill:e}}]}},name:\"crown\",theme:\"twotone\"},J=n(\"6VBw\"),V=function(e,t){return o.createElement(J.a,Object.assign({},e,{ref:t,icon:H}))};V.displayName=\"CrownTwoTone\";var z=o.forwardRef(V),F=n(\"BvKs\"),W=n(\"jsC+\"),Y=n(\"NsEo\"),G=(n(\"iZf9\"),i.a.createElement);function Q(e){var t=e.data,n=e.showTimestamp,r=e.isOwner,a=e.canDelete,o=e.onDelete,i=R()(t.timestamp).format(\"LLLL\"),s=G(F.a,null,G(F.a.Item,{onClick:o},G(\"a\",null,\"delete\")));return G(\"div\",{className:Object(Y.a)(e)},t.text&&!t.isSystem&&G(\"div\",{className:\"bubble-container\"},G(\"div\",{className:\"bubble\",title:i},a&&G(W.a,{overlay:s,placement:\"topRight\"},G(\"span\",null,G(q.a,null),\" \")),t.senderInfo&&G(\"span\",{className:\"u-name\"},r&&G(z,{twoToneColor:\"#eb2f96\"}),t.senderInfo.username,\"tip\"!==t.type?\": \":\" \"),!t.imageUrl&&t.text,\" \",t.imageUrl&&G(\"a\",{title:\"Click to view full content\",href:-1===t.imageUrl.indexOf(\"http\")?\"#\":t.imageUrl,target:\"_blank\",rel:\"noreferrer\"},G(\"img\",{src:t.imageUrl,width:\"180px\",alt:\"\"})))),t.text&&t.isSystem&&G(\"p\",{style:{textAlign:\"center\",fontSize:\"14px\"}},t.text),n&&!t.isSystem&&G(\"div\",{className:\"timestamp\"},i))}var X=i.a.createElement;function K(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Z=function(e){Object(u.a)(n,e);var t=K(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(y.a)(Object(g.a)(e),\"messagesRef\",void 0),Object(y.a)(Object(g.a)(e),\"state\",{page:1,onloadmore:!1}),Object(y.a)(Object(g.a)(e),\"onMessage\",(function(t,n){var r=e.props,a=r.receiveStreamMessageSuccess,o=r.deleteMessageSuccess;t&&(\"created\"===n&&a(t),\"deleted\"===n&&o(t))})),Object(y.a)(Object(g.a)(e),\"onDelete\",(function(t){var n=e.props.deleteMessage;t&&n({messageId:t})})),Object(y.a)(Object(g.a)(e),\"renderMessages\",(function(){var t=e.props,n=t.message,r=t.currentUser,a=t.currentPerformer,o=t.conversation,s=t.loggedIn,c=n.items,u=n.fetching,l=0,d=c&&c.length;if(!c.length&&!u){var f=s?\"There are no chat!\":X(i.a.Fragment,null,\"There are no chat, please\",X(S.a,{href:\"/auth/register\"},X(\"a\",null,\" register \")),\"or\",X(S.a,{href:\"/auth/login\"},X(\"a\",null,\" login \")),\"to send message!\");return X(Q,{data:{isSystem:!0,text:f}})}for(var p=[];l<d;){var v=c[l-1],b=c[l],m=c[l+1],h=r&&r._id?r._id:a&&a._id?a._id:null,O=b.senderId===h,y=R()(b.createdAt),j=!0,w=!0,I=!0,C=o&&o.performerId===b.senderId,E=!b.isDeleted&&a&&a._id===o.performerId||!b.isDeleted&&r._id===b.senderId||!b.isDeleted&&r.roles&&r.roles.includes(\"admin\");if(v){var _=R()(v.createdAt),k=R.a.duration(y.diff(_));v.senderId===b.senderId&&k.as(\"hours\")<1&&(j=!1),k.as(\"hours\")<1&&(I=!1)}if(m){var x=R()(m.createdAt),P=R.a.duration(x.diff(y));m.senderId===b.senderId&&P.as(\"hours\")<1&&(w=!1)}b._id&&p.push(X(Q,{onDelete:e.onDelete.bind(Object(g.a)(e),b._id),canDelete:E,isOwner:C,key:l,isMine:O,startsSequence:j,endsSequence:w,showTimestamp:I,data:b})),l+=1}return e.scrollToBottom(),p})),e}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(O.a)(h.a.mark((function e(){var t,n,r=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messagesRef||(this.messagesRef=Object(o.createRef)()),t=this.props.conversation,n=this.context,t&&t._id&&(n&&n.on&&n.on(\"message_created_conversation_\".concat(t._id),(function(e){r.onMessage(e,\"created\")})),n&&n.on&&n.on(\"message_deleted_conversation_\".concat(t._id),(function(e){r.onMessage(e,\"deleted\")})));case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"componentWillUnmount\",value:function(){var e=this.props.conversation,t=this.context;t&&t.off(\"message_created_conversation_\".concat(e._id)),t&&t.off(\"message_deleted_conversation_\".concat(e._id))}},{key:\"handleScroll\",value:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r,a,o,i,s,c,u,l,d,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.message,o=r.isPublic,i=r.loadMoreStreamMessages,s=this.state.page,c=a.fetching,u=a.items,l=a.total,d=l>u.length,f=n.target,d){e.next=7;break}return e.abrupt(\"return\");case 7:if(0!==f.scrollTop||!t._id||c||!d){e.next=11;break}return e.next=10,this.setState({page:s+1,onloadmore:!0});case 10:i({conversationId:t._id,type:t.type,limit:25,offset:25*s,isPublic:o});case 11:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"scrollToBottom\",value:function(){if(!this.state.onloadmore&&this.messagesRef&&this.messagesRef.current){var e=this.messagesRef.current;window.setTimeout((function(){e.scrollTop=e.scrollHeight}),200)}}},{key:\"render\",value:function(){var e=this.props,t=e.conversation,n=e.isPublic,r=e.message.fetching;return this.messagesRef||(this.messagesRef=Object(o.createRef)()),X(\"div\",{className:\"message-list\",ref:this.messagesRef,onScroll:this.handleScroll.bind(this,t)},t&&t._id&&X(i.a.Fragment,null,X(\"div\",{className:\"message-list-container\"},r&&X(\"p\",{className:\"text-center\"},\"fetching...\"),this.renderMessages()),X(B,{conversation:t,isPublic:n})))}}]),n}(o.PureComponent);Z.contextType=I.c;var $={loadMoreStreamMessages:b.f,receiveStreamMessageSuccess:b.j,deleteMessage:b.a,deleteMessageSuccess:b.b},ee=Object(v.b)((function(e){var t=e.streamMessage,n=t.conversationMap,r=t.activeConversation;return{message:{items:r.data&&n[r.data._id]&&n[r.data._id].items||[],total:r.data&&n[r.data._id]&&n[r.data._id].total||0,fetching:r.data&&n[r.data._id]&&n[r.data._id].fetching||!1},conversation:r.data,currentUser:e.user.current,currentPerformer:e.performer.current,loggedIn:e.auth.loggedIn}}),$)(Z),te=i.a.createElement;function ne(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var re=function(e){Object(u.a)(n,e);var t=ne(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.streamId,n=e.activeConversation,r=e.getStreamConversation;!n&&t&&r({conversation:n.data,isPublic:!0})}},{key:\"render\",value:function(){var e=this.props,t=e.activeConversation,n=e.isPublic,r=e.loggedIn;return te(\"div\",{className:p()(\"message-stream\",r?\"user-logged-in\":\"\")},t&&t.data&&t.data.streamId?te(ee,{isPublic:n}):te(\"p\",null,\"No conversation found.\"))}}]),n}(o.PureComponent),ae={getStreamConversation:b.d},oe=Object(v.b)((function(e){return{activeConversation:e.streamMessage.activeConversation,loggedIn:e.auth.loggedIn}}),ae)(re),ie={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z\"}}]},name:\"stop\",theme:\"outlined\"},se=function(e,t){return o.createElement(J.a,Object.assign({},e,{ref:t,icon:ie}))};se.displayName=\"StopOutlined\";var ce=o.forwardRef(se),ue=n(\"8Skl\"),le=o.createElement,de=Object(v.b)((function(e){return{placeholderAvatarUrl:e.ui.placeholderAvatarUrl}}),{})((function(e){var t=e.loggedIn,n=e.members,r=e.currentPerformer,a=e.blockUser,o=e.placeholderAvatarUrl,i=function(e){var t=e.id;return le(F.a,null,le(F.a.Item,{onClick:function(){return a(t)}},le(\"span\",null,le(ce,{size:16}),\" \",\"Block this user\")))};return le(\"div\",{className:\"conversation-users\"},le(\"div\",{className:\"users\"},n.length>0&&n.map((function(e){return le(\"div\",{className:\"user\",key:e._id},t&&r&&r._id?le(W.a,{overlay:le(i,{id:e._id}),placement:\"bottomLeft\",trigger:[\"hover\",\"click\"]},le(\"span\",{className:\"username\"},le(\"img\",{alt:\"avatar\",src:(null===e||void 0===e?void 0:e.avatar)||o,width:\"35px\",style:{borderRadius:\"50%\",marginRight:\"5px\"}}),e.username,\" \",le(ue.a,null))):le(\"span\",{className:\"username\"},le(\"img\",{alt:\"avatar\",src:(null===e||void 0===e?void 0:e.avatar)||\"/default-user-icon.png\",width:\"35px\",style:{borderRadius:\"50%\",marginRight:\"5px\"}}),e.username))}))))})),fe=(n(\"VUsV\"),i.a.createElement),pe=function(e){var t=e.isPublic,n=e.blockUser,r=e.activeConversation,o=e.totalParticipant,i=e.currentPerformer,s=e.loggedIn,c=e.members;return fe(\"div\",{className:\"conversation-stream\"},fe(a.a,{defaultActiveKey:\"chat_content\"},fe(a.a.TabPane,{tab:\"CHAT\",key:\"chat_content\"},r&&r.data&&r.data.streamId&&fe(oe,{isPublic:t,streamId:r.data.streamId,activeConversation:r.data})),fe(a.a.TabPane,{tab:\"USER (\".concat(o||0,\")\"),key:\"chat_user\"},fe(de,{currentPerformer:i,loggedIn:s,members:c,blockUser:n}))))};pe.defaultProps={isPublic:!1,totalParticipant:0,activeConversation:null,currentPerformer:null,loggedIn:!1,members:[],blockUser:null};t.a=pe},MoJi:function(e,t,n){\"use strict\";var r;n.d(t,\"a\",(function(){return r})),function(e){e.INITIALIZED=\"initialized\",e.PUBLISH_STARTED=\"publish_started\",e.PUBLISH_FINISHED=\"publish_finished\",e.SCREEN_SHARE_EXTENSION_AVAILABLE=\"screen_share_extension_available\",e.SCREEN_SHARE_STOPPED=\"screen_share_stopped\",e.CLOSED=\"closed\",e.PONG=\"pong\",e.REFRESH_CONNECTION=\"refreshConnection\",e.ICE_CONNECTION_STATE_CHANGED=\"ice_connection_state_changed\",e.UPDATED_STATS=\"updated_stats\",e.PLAY_FINISHED=\"play_finished\",e.PLAY_STARTED=\"play_started\",e.JOINED_THE_ROOM=\"joinedTheRoom\",e.STREAM_JOINED=\"streamJoined\",e.NEW_STREAM_AVAILABLE=\"newStreamAvailable\",e.STREAM_LEAVED=\"streamLeaved\",e.LEAVED_FROM_ROOM=\"leavedFromRoom\",e.STREAM_INFORMATION=\"streamInformation\"}(r||(r={}))},OVUx:function(e,t,n){},OY8u:function(e,t,n){\"use strict\";var r=n(\"KQm4\"),a=n(\"o0o1\"),o=n.n(a),i=n(\"HaE+\"),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"JX7q\"),l=n(\"Ji7U\"),d=n(\"md7G\"),f=n(\"foSv\"),p=n(\"rePB\"),v=n(\"q1tI\"),b=n.n(v),m=n(\"HQdG\"),h=n(\"tsqr\"),O=n(\"2/Rp\"),g=n(\"nOHt\"),y=n.n(g),j=n(\"MoJi\"),R=n(\"AY7M\"),w=n(\"CLrh\"),S=n(\"8OJ3\"),I=(n(\"+NjP\"),b.a.createElement);function C(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var E=function(e){Object(l.a)(n,e);var t=C(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(p.a)(Object(u.a)(r),\"activeStreams\",[]),Object(p.a)(Object(u.a)(r),\"socket\",void 0),Object(p.a)(Object(u.a)(r),\"getLiveStreamOrVodURLInterval\",void 0),r.state={sessionId:\"\",streamId:\"\",streamList:[],conversationId:\"\",loading:!1,newAvailableStreams:[]},r}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){this.socket=this.context}},{key:\"componentDidUpdate\",value:function(e,t){var n=this,r=this.props,a=r.processing,o=r.initialized,i=this.state,s=i.conversationId,c=i.newAvailableStreams;e.processing!==a&&this.handleLoading(a),s&&s!==t.conversationId&&this.initSocketEvent(),o&&c.length&&(c.forEach((function(e){n.play(e)})),this.setState({newAvailableStreams:[]}))}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload.bind(this)),y.a.events.off(\"routeChangeStart\",this.onbeforeunload.bind(this))}},{key:\"handleLoading\",value:function(e){this.setState({loading:e})}},{key:\"onHandlePrivateStream\",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,a,i,s,c,u,l,d,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state,a=r.sessionId,i=r.conversationId,s=r.streamId,c=this.props,u=c.settings,l=c.webRTCAdaptor,this.socket=this.context,\"initialized\"!==t){e.next=12;break}if(\"hls\"!==u.optionForPrivate){e.next=9;break}return e.next=7,w.p.getPublishToken({streamId:s,settings:u});case 7:d=e.sent,l.publish(s,d);case 9:l.joinRoom(i,s),e.next=26;break;case 12:if(t!==j.a.NEW_STREAM_AVAILABLE){e.next=17;break}this.activeStreams.find((function(e){return e===n.streamId}))||(this.activeStreams.push(n.streamId),this.createRemoteVideo(n.stream)),e.next=26;break;case 17:if(t!==j.a.JOINED_THE_ROOM){e.next=25;break}if(\"webrtc\"!==u.optionForPrivate){e.next=23;break}return e.next=21,w.p.getPublishToken({streamId:s,settings:u});case 21:f=e.sent,l.publish(s,f);case 23:e.next=26;break;case 25:\"publish_started\"===t?(this.socket.emit(\"private-stream/join\",{conversationId:i,streamId:s,sessionId:a}),this.setState({loading:!1})):\"publish_finished\"===t&&(this.socket.emit(\"private-stream/leave\",{conversationId:i,streamId:s,sessionId:a}),this.setState({loading:!1}));case 26:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"onbeforeunload\",value:function(){this.leaveStream()}},{key:\"initSocketEvent\",value:function(){var e=this,t=this.props,n=t.initWebRTCAdaptor,a=t.settings,o=t.role_data,i=t.performer;this.socket=this.context,this.socket.on(\"JOINED_THE_ROOM\",(function(t){var o=t.streamId,i=t.streamList,s=t.conversationId,c=e.state,u=c.conversationId,l=c.newAvailableStreams;s===u&&(e.setState({streamId:o,streamList:i}),n(e.onHandlePrivateStream.bind(e)),window.videojs&&i.length&&(\"webrtc\"===a.optionForPrivate?e.setState({newAvailableStreams:[].concat(Object(r.a)(l),[i[0]])}):e.subscribeHLS(i[0])))})),this.socket.on(\"private-stream/streamJoined\",(function(t){var n=e.state,o=n.streamId,i=n.newAvailableStreams;window.videojs&&o!==t.streamId&&(\"webrtc\"===a.optionForPrivate?e.setState({newAvailableStreams:[].concat(Object(r.a)(i),[t.streamId])}):e.subscribeHLS(t.streamId))})),this.socket.on(\"private-stream/streamLeaved\",(function(t){var n=e.state.streamList;e.setState({streamList:n.filter((function(e){return e!==t.streamId}))}),window.mainPlayer&&window.mainPlayer.dispose(),e.activeStreams=e.activeStreams.filter((function(e){return e!==t.streamId})),e.removeRemoteVideo(),h.b.error(\"Private call has ended.\"),window.setTimeout((function(){\"performer\"===o?y.a.push(\"/live\"):\"user\"===o?y.a.push({pathname:\"/stream\",query:{performer:JSON.stringify(i)}},\"/profile/\".concat(i.username)):y.a.push(\"/\")}),1e3)})),y.a.events.on(\"routeChangeStart\",this.onbeforeunload.bind(this)),window.addEventListener(\"beforeunload\",this.onbeforeunload.bind(this))}},{key:\"start\",value:function(e,t){this.setState({sessionId:e,conversationId:t})}},{key:\"leaveStream\",value:function(){var e=this.props,t=e.publish_started,n=e.webRTCAdaptor,r=this.state,a=r.sessionId,o=r.conversationId,i=r.streamId;this.getLiveStreamOrVodURLInterval&&clearInterval(this.getLiveStreamOrVodURLInterval),this.socket.off(\"JOINED_THE_ROOM\"),this.socket.off(\"private-stream/streamJoined\"),this.socket.off(\"private-stream/streamLeaved\"),t&&(n&&n.leaveFromRoom(o),this.socket.emit(\"private-stream/leave\",{conversationId:o,streamId:i,sessionId:a}))}},{key:\"ended\",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.settings,e.next=3,w.p.getLiveStreamOrVodURL({streamId:t,settings:n,appName:n.AntMediaAppname});case 3:(r=e.sent)&&(this.getLiveStreamOrVodURLInterval=setInterval((function(){fetch(r,{method:\"GET\"}).then((function(){a.subscribeHLS(t),a.getLiveStreamOrVodURLInterval&&clearInterval(a.getLiveStreamOrVodURLInterval)}))}),5e3));case 5:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"subscribeHLS\",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,i,s,c,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.settings,a=n.configs,i=a.appName||r.AntMediaAppname,this.getLiveStreamOrVodURLInterval&&clearInterval(this.getLiveStreamOrVodURLInterval),e.next=5,w.p.getLiveStreamOrVodURL({appName:i,settings:r,streamId:t});case 5:if(s=e.sent){e.next=8;break}return e.abrupt(\"return\");case 8:(c=document.querySelector(\"#private-subscriber\"))||((c=document.createElement(\"video\")).setAttribute(\"id\",\"private-subscriber\"),c.setAttribute(\"class\",\"video-js vjs-waiting\"),c.setAttribute(\"autoplay\",\"autoplay\"),c.setAttribute(\"data-setup\",'{\"fluid\": true}'),document.querySelector(\".private-streaming-container\").append(c)),window.mainPlayer||(window.mainPlayer=Object(S.a)(\"private-subscriber\",{liveui:!0,controls:!0}),window.mainPlayer.on(\"ended\",(function(){return u.ended(t)})),window.mainPlayer.on(\"error\",(function(){return u.ended(t)}))),setTimeout((function(){window.mainPlayer&&(window.mainPlayer.src({type:\"application/x-mpegURL\",src:s}),window.mainPlayer.play())}),1e4);case 12:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"createRemoteVideo\",value:function(e){var t=document.createElement(\"video\");t.setAttribute(\"id\",\"private-subscriber\"),t.setAttribute(\"class\",\"video-js\"),t.setAttribute(\"autoplay\",\"autoplay\"),t.setAttribute(\"controls\",\"controls\"),t.srcObject=e,document.querySelector(\".private-streaming-container\").append(t)}},{key:\"removeRemoteVideo\",value:function(){var e=document.getElementById(\"private-subscriber\");e&&(e.srcObject=null,document.querySelector(\".private-streaming-container\").removeChild(e))}},{key:\"leave\",value:function(){window.location.reload()}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"play\",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.settings,a=n.webRTCAdaptor,e.next=3,w.p.getSubscriberToken({streamId:t,settings:r});case 3:i=e.sent,a.play(t,i);case 5:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.props,t=e.onClick,n=e.btnText,r=e.initialized,a=this.state.loading;return I(\"div\",{className:\"private-streaming-container\"},I(\"video\",{id:\"private-publisher\",autoPlay:!0,muted:!0,playsInline:!0}),r?I(O.a,{type:\"primary\",onClick:this.leave.bind(this),block:!0,disabled:a},\"Stop Streaming\"):I(O.a,{type:\"primary\",onClick:function(){return t()},loading:a,block:!0},n||\"Start Streaming\"))}}]),n}(v.PureComponent);E.contextType=R.c,t.a=Object(m.a)(E)},PqZw:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return a})),n.d(t,\"a\",(function(){return o})),n.d(t,\"c\",(function(){return i}));var r=n(\"vo7w\"),a=Object(r.a)(\"ADD_PRIVATE_REQUEST\"),o=Object(r.a)(\"ACCESS_PRIVATE_REQUSET\"),i=Object(r.a)(\"UPDATE_LIVE_STREAM_SETTINGS\")},R3zJ:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o})),n.d(t,\"b\",(function(){return i}));var r,a=n(\"MNnm\"),o=function(){return Object(a.a)()&&window.document.documentElement},i=function(){if(!o())return!1;if(void 0!==r)return r;var e=document.createElement(\"div\");return e.style.display=\"flex\",e.style.flexDirection=\"column\",e.style.rowGap=\"1px\",e.appendChild(document.createElement(\"div\")),e.appendChild(document.createElement(\"div\")),document.body.appendChild(e),r=1===e.scrollHeight,document.body.removeChild(e),r}},UTbA:function(e,t,n){},VUsV:function(e,t,n){},XBQK:function(e,t,n){\"use strict\";var r=n(\"wx14\"),a=n(\"rePB\"),o=n(\"q1tI\"),i=n(\"eDIo\"),s=n(\"TSYQ\"),c=n.n(s),u=n(\"UESt\"),l=n(\"ODXe\"),d=n(\"GZ0F\"),f=n(\"2/Rp\"),p=n(\"H84U\"),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},b=f.a.Group,m=function(e){var t=o.useContext(p.b),n=t.getPopupContainer,a=t.getPrefixCls,i=t.direction,s=e.prefixCls,u=e.type,m=e.disabled,h=e.onClick,O=e.htmlType,g=e.children,y=e.className,j=e.overlay,w=e.trigger,S=e.align,I=e.visible,C=e.onVisibleChange,E=e.placement,_=e.getPopupContainer,k=e.href,x=e.icon,P=void 0===x?o.createElement(d.a,null):x,A=e.title,T=e.buttonsRender,N=v(e,[\"prefixCls\",\"type\",\"disabled\",\"onClick\",\"htmlType\",\"children\",\"className\",\"overlay\",\"trigger\",\"align\",\"visible\",\"onVisibleChange\",\"placement\",\"getPopupContainer\",\"href\",\"icon\",\"title\",\"buttonsRender\"]),M=a(\"dropdown-button\",s),L={align:S,overlay:j,disabled:m,trigger:m?[]:w,onVisibleChange:C,getPopupContainer:_||n};\"visible\"in e&&(L.visible=I),L.placement=\"placement\"in e?E:\"rtl\"===i?\"bottomLeft\":\"bottomRight\";var D=T([o.createElement(f.a,{type:u,disabled:m,onClick:h,htmlType:O,href:k,title:A},g),o.createElement(f.a,{type:u,icon:P})]),U=Object(l.a)(D,2),B=U[0],q=U[1];return o.createElement(b,Object(r.a)({},N,{className:c()(M,y)}),B,o.createElement(R,L,q))};m.__ANT_BUTTON=!0,m.defaultProps={type:\"default\",buttonsRender:function(e){return e}};var h=m,O=n(\"uaoM\"),g=n(\"CWQg\"),y=n(\"0n0R\"),j=(Object(g.a)(\"topLeft\",\"topCenter\",\"topRight\",\"bottomLeft\",\"bottomCenter\",\"bottomRight\"),function(e){var t,n=o.useContext(p.b),s=n.getPopupContainer,l=n.getPrefixCls,d=n.direction,f=e.arrow,v=e.prefixCls,b=e.children,m=e.trigger,h=e.disabled,g=e.getPopupContainer,j=e.overlayClassName,R=l(\"dropdown\",v),w=o.Children.only(b),S=Object(y.a)(w,{className:c()(\"\".concat(R,\"-trigger\"),Object(a.a)({},\"\".concat(R,\"-rtl\"),\"rtl\"===d),w.props.className),disabled:h}),I=c()(j,Object(a.a)({},\"\".concat(R,\"-rtl\"),\"rtl\"===d)),C=h?[]:m;return C&&-1!==C.indexOf(\"contextMenu\")&&(t=!0),o.createElement(i.a,Object(r.a)({arrow:f,alignPoint:t},e,{overlayClassName:I,prefixCls:R,getPopupContainer:g||s,transitionName:function(){var t=l(),n=e.placement,r=void 0===n?\"\":n,a=e.transitionName;return void 0!==a?a:r.indexOf(\"top\")>=0?\"\".concat(t,\"-slide-down\"):\"\".concat(t,\"-slide-up\")}(),trigger:C,overlay:function(){return function(t){var n,r=e.overlay;n=\"function\"===typeof r?r():r;var a=(n=o.Children.only(\"string\"===typeof n?o.createElement(\"span\",null,n):n)).props;Object(O.a)(!a.mode||\"vertical\"===a.mode,\"Dropdown\",'mode=\"'.concat(a.mode,\"\\\" is not supported for Dropdown's Menu.\"));var i=a.selectable,s=void 0!==i&&i,c=a.focusable,l=void 0===c||c,d=a.expandIcon,f=\"undefined\"!==typeof d&&o.isValidElement(d)?d:o.createElement(\"span\",{className:\"\".concat(t,\"-menu-submenu-arrow\")},o.createElement(u.a,{className:\"\".concat(t,\"-menu-submenu-arrow-icon\")}));return\"string\"===typeof n.type?n:Object(y.a)(n,{mode:\"vertical\",selectable:s,focusable:l,expandIcon:f})}(R)},placement:function(){var t=e.placement;return void 0!==t?t:\"rtl\"===d?\"bottomRight\":\"bottomLeft\"}()}),S)});j.Button=h,j.defaultProps={mouseEnterDelay:.15,mouseLeaveDelay:.1};var R=t.a=j},aQHu:function(e,t,n){\"use strict\";n.r(t);var r,a=n(\"wx14\"),o=n(\"o0o1\"),i=n.n(o),s=n(\"HaE+\"),c=n(\"1OyB\"),u=n(\"vuIU\"),l=n(\"JX7q\"),d=n(\"Ji7U\"),f=n(\"md7G\"),p=n(\"foSv\"),v=n(\"rePB\"),b=n(\"q1tI\"),m=n.n(b),h=n(\"8Kt/\"),O=n.n(h),g=n(\"tsqr\"),y=n(\"BMrR\"),j=n(\"kPKH\"),R=n(\"nOHt\"),w=n.n(R),S=n(\"OY8u\"),I=n(\"CLrh\"),C=n(\"/MKj\"),E=n(\"PqZw\"),_=n(\"AY7M\"),k=n(\"L/eJ\"),x=n(\"gxiY\"),P=(n(\"jNaB\"),n(\"NsEo\")),A=m.a.createElement;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}!function(e){e.JOINED_THE_ROOM=\"JOINED_THE_ROOM\",e.JOIN_ROOM=\"JOIN_ROOM\",e.LEAVE_ROOM=\"LEAVE_ROOM\",e.STREAM_INFORMATION_CHANGED=\"private-stream/streamInformationChanged\"}(r||(r={}));var M=function(e){Object(d.a)(n,e);var t=N(n);function n(e){var r;return Object(c.a)(this,n),r=t.call(this,e),Object(v.a)(Object(l.a)(r),\"streamRef\",void 0),Object(v.a)(Object(l.a)(r),\"socket\",void 0),Object(v.a)(Object(l.a)(r),\"onbeforeunload\",(function(){r.leaveSession()})),r.state={processing:!1,total:0,members:[]},r}return Object(u.a)(n,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.router,n=e.accessPrivateRequest;window.addEventListener(\"beforeunload\",this.onbeforeunload),w.a.events.on(\"routeChangeStart\",this.onbeforeunload),n(t.query.id),this.socket=this.context}},{key:\"componentDidUpdate\",value:function(e){var t=this.props,n=t.router,r=t.accessPrivateRequest;e.router.query.id!==n.query.id&&(r(n.query.id),this.socket=this.context)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),w.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(e){var t,n=e.total,r=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&o.data._id===a&&this.setState({total:n,members:r})}},{key:\"leaveSession\",value:function(){var e,t=this.props,n=t.activeConversation,a=t.resetStreamMessage;this.socket&&null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e._id&&(this.socket.emit(r.LEAVE_ROOM,{conversationId:n.data._id}),a()),this.setState({processing:!1,total:0,members:[]})}},{key:\"acceptRequest\",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,o,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.router,a=t.getStreamConversationSuccess,n.query.id){e.next=3;break}return e.abrupt(\"return\");case 3:return e.prev=3,this.setState({processing:!0}),e.next=7,I.p.acceptPrivateChat(n.query.id.toString());case 7:(o=e.sent)&&o.data&&(this.socket=this.context,s=o.data,c=s.sessionId,u=s.conversation,this.socket&&this.socket.emit(r.JOIN_ROOM,{conversationId:u._id}),this.streamRef&&this.streamRef.start(c,u._id),a({data:u})),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,Promise.resolve(e.t0);case 15:l=e.sent,g.b.error(Object(P.g)(l));case 17:return e.prev=17,this.setState({processing:!1}),e.finish(17);case 20:case\"end\":return e.stop()}}),e,this,[[3,11,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:\"roomJoinedHandler\",value:function(e){var t,n=e.total,r=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({total:n,members:r})}},{key:\"render\",value:function(){var e=this,t=this.props.user,n=this.state,o=n.processing,i=n.total,s=n.members;return A(m.a.Fragment,null,A(O.a,null,A(\"title\",null,\"Private Chat\")),A(_.a,{event:r.STREAM_INFORMATION_CHANGED,handler:this.handler.bind(this)}),A(_.a,{event:r.JOINED_THE_ROOM,handler:this.roomJoinedHandler.bind(this)}),A(\"div\",{className:\"container\"},A(y.a,null,A(j.a,{md:12,xs:24},A(S.a,Object(a.a)({},this.props,{role_data:\"performer\",participantId:t.username,ref:function(t){return e.streamRef=t},sessionId:\"\",configs:{localVideoId:\"private-publisher\"},btnText:\"Accept Video Call Request\",onClick:this.acceptRequest.bind(this),processing:o}))),A(j.a,{xs:24,md:12},A(k.a,Object(a.a)({},this.props,{totalParticipant:i,members:s}))))))}}],[{key:\"getInitialProps\",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.ctx).query.id){e.next=7;break}return w.a.push(\"/\"),e.abrupt(\"return\");case 5:n.res.writeHead&&n.res.writeHead(302,{Location:\"/\"}),n.res.end&&n.res.end();case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b.PureComponent);Object(v.a)(M,\"authenticate\",!0),Object(v.a)(M,\"onlyPerformer\",!0),M.contextType=_.c;var L={accessPrivateRequest:E.a,getStreamConversationSuccess:x.e,resetStreamMessage:x.l};t.default=Object(C.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({user:e.user.current,loggedIn:e.auth.loggedIn,activeConversation:e.streamMessage.activeConversation},e.streaming)}),L)(Object(R.withRouter)(M))},iZf9:function(e,t,n){},\"l+S1\":function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"}}]},name:\"search\",theme:\"outlined\"},o=n(\"6VBw\"),i=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"SearchOutlined\";t.a=r.forwardRef(i)},\"o/2+\":function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=Object(r.createContext)({});t.a=a},qMfs:function(e,t,n){},qrJ5:function(e,t,n){\"use strict\";var r=n(\"wx14\"),a=n(\"rePB\"),o=n(\"U8pU\"),i=n(\"ODXe\"),s=n(\"q1tI\"),c=n(\"TSYQ\"),u=n.n(c),l=n(\"H84U\"),d=n(\"o/2+\"),f=n(\"CWQg\"),p=n(\"ACnJ\"),v=n(\"R3zJ\"),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},m=(Object(f.a)(\"top\",\"middle\",\"bottom\",\"stretch\"),Object(f.a)(\"start\",\"end\",\"center\",\"space-around\",\"space-between\"),s.forwardRef((function(e,t){var n,c=e.prefixCls,f=e.justify,m=e.align,h=e.className,O=e.style,g=e.children,y=e.gutter,j=void 0===y?0:y,R=e.wrap,w=b(e,[\"prefixCls\",\"justify\",\"align\",\"className\",\"style\",\"children\",\"gutter\",\"wrap\"]),S=s.useContext(l.b),I=S.getPrefixCls,C=S.direction,E=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),_=Object(i.a)(E,2),k=_[0],x=_[1],P=s.useRef(j);s.useEffect((function(){var e=p.a.subscribe((function(e){var t=P.current||0;(!Array.isArray(t)&&\"object\"===Object(o.a)(t)||Array.isArray(t)&&(\"object\"===Object(o.a)(t[0])||\"object\"===Object(o.a)(t[1])))&&x(e)}));return function(){return p.a.unsubscribe(e)}}),[]);var A=I(\"row\",c),T=function(){var e=[0,0];return(Array.isArray(j)?j:[j,0]).forEach((function(t,n){if(\"object\"===Object(o.a)(t))for(var r=0;r<p.b.length;r++){var a=p.b[r];if(k[a]&&void 0!==t[a]){e[n]=t[a];break}}else e[n]=t||0})),e}(),N=u()(A,(n={},Object(a.a)(n,\"\".concat(A,\"-no-wrap\"),!1===R),Object(a.a)(n,\"\".concat(A,\"-\").concat(f),f),Object(a.a)(n,\"\".concat(A,\"-\").concat(m),m),Object(a.a)(n,\"\".concat(A,\"-rtl\"),\"rtl\"===C),n),h),M={},L=T[0]>0?T[0]/-2:void 0,D=T[1]>0?T[1]/-2:void 0;if(M.marginLeft=L,M.marginRight=L,Object(v.b)()){var U=Object(i.a)(T,2);M.rowGap=U[1]}else M.marginTop=D,M.marginBottom=D;return s.createElement(d.a.Provider,{value:{gutter:T,wrap:R}},s.createElement(\"div\",Object(r.a)({},w,{className:N,style:Object(r.a)(Object(r.a)({},M),O),ref:t}),g))})));m.displayName=\"Row\",t.a=m}},[[\"A9Xj\",0,1,4,5,32,3,2,6,7,10,9,11,12,13,14,15,16,17,19,22,25,26,28,33,38,8]]]);","extractedComments":[]}
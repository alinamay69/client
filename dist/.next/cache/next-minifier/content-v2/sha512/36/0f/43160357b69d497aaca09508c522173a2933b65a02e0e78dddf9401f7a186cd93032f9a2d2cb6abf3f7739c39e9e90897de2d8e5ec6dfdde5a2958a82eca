{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[104],{\"/kpp\":function(e,t,r){\"use strict\";var n=r(\"rePB\"),a=r(\"wx14\"),o=r(\"U8pU\"),s=r(\"q1tI\"),i=r(\"TSYQ\"),c=r.n(i),u=r(\"o/2+\"),l=r(\"H84U\"),d=r(\"R3zJ\"),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};var b=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],p=s.forwardRef((function(e,t){var r,i=s.useContext(l.b),p=i.getPrefixCls,m=i.direction,v=s.useContext(u.a),h=v.gutter,O=v.wrap,y=e.prefixCls,j=e.span,I=e.order,g=e.offset,R=e.push,k=e.pull,C=e.className,w=e.children,x=e.flex,E=e.style,S=f(e,[\"prefixCls\",\"span\",\"order\",\"offset\",\"push\",\"pull\",\"className\",\"children\",\"flex\",\"style\"]),_=p(\"col\",y),N={};b.forEach((function(t){var r,s={},i=e[t];\"number\"===typeof i?s.span=i:\"object\"===Object(o.a)(i)&&(s=i||{}),delete S[t],N=Object(a.a)(Object(a.a)({},N),(r={},Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-\").concat(s.span),void 0!==s.span),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-order-\").concat(s.order),s.order||0===s.order),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-offset-\").concat(s.offset),s.offset||0===s.offset),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-push-\").concat(s.push),s.push||0===s.push),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-pull-\").concat(s.pull),s.pull||0===s.pull),Object(n.a)(r,\"\".concat(_,\"-rtl\"),\"rtl\"===m),r))}));var A=c()(_,(r={},Object(n.a)(r,\"\".concat(_,\"-\").concat(j),void 0!==j),Object(n.a)(r,\"\".concat(_,\"-order-\").concat(I),I),Object(n.a)(r,\"\".concat(_,\"-offset-\").concat(g),g),Object(n.a)(r,\"\".concat(_,\"-push-\").concat(R),R),Object(n.a)(r,\"\".concat(_,\"-pull-\").concat(k),k),r),C,N),T={};if(h&&h[0]>0){var P=h[0]/2;T.paddingLeft=P,T.paddingRight=P}if(h&&h[1]>0&&!Object(d.b)()){var M=h[1]/2;T.paddingTop=M,T.paddingBottom=M}return x&&(T.flex=function(e){return\"number\"===typeof e?\"\".concat(e,\" \").concat(e,\" auto\"):/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(e)?\"0 0 \".concat(e):e}(x),\"auto\"!==x||!1!==O||T.minWidth||(T.minWidth=0)),s.createElement(\"div\",Object(a.a)({},S,{style:Object(a.a)(Object(a.a)({},T),E),className:A,ref:t}),w)}));p.displayName=\"Col\",t.a=p},\"6cGi\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o}));var n=r(\"ODXe\"),a=r(\"q1tI\");function o(e,t){var r=t||{},o=r.defaultValue,s=r.value,i=r.onChange,c=r.postState,u=a.useState((function(){return void 0!==s?s:void 0!==o?\"function\"===typeof o?o():o:\"function\"===typeof e?e():e})),l=Object(n.a)(u,2),d=l[0],f=l[1],b=void 0!==s?s:d;c&&(b=c(b));var p=a.useRef(!0);return a.useEffect((function(){p.current?p.current=!1:void 0===s&&f(s)}),[s]),[b,function(e){f(e),b!==e&&i&&i(e,b)}]}},\"8Skl\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z\"}}]},name:\"down\",theme:\"outlined\"},o=r(\"6VBw\"),s=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};s.displayName=\"DownOutlined\";t.a=n.forwardRef(s)},R3zJ:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o})),r.d(t,\"b\",(function(){return s}));var n,a=r(\"MNnm\"),o=function(){return Object(a.a)()&&window.document.documentElement},s=function(){if(!o())return!1;if(void 0!==n)return n;var e=document.createElement(\"div\");return e.style.display=\"flex\",e.style.flexDirection=\"column\",e.style.rowGap=\"1px\",e.appendChild(document.createElement(\"div\")),e.appendChild(document.createElement(\"div\")),document.body.appendChild(e),n=1===e.scrollHeight,document.body.removeChild(e),n}},TUqg:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/live/webrtc/groupchat\",function(){return r(\"Wzb8\")}])},Wzb8:function(e,t,r){\"use strict\";r.r(t);var n,a=r(\"wx14\"),o=r(\"o0o1\"),s=r.n(o),i=r(\"HaE+\"),c=r(\"1OyB\"),u=r(\"vuIU\"),l=r(\"JX7q\"),d=r(\"Ji7U\"),f=r(\"md7G\"),b=r(\"foSv\"),p=r(\"rePB\"),m=r(\"q1tI\"),v=r.n(m),h=r(\"8Kt/\"),O=r.n(h),y=r(\"tsqr\"),j=r(\"BMrR\"),I=r(\"kPKH\"),g=r(\"2/Rp\"),R=r(\"nOHt\"),k=r.n(R),C=r(\"CLrh\"),w=r(\"/MKj\"),x=r(\"AY7M\"),E=r(\"L/eJ\"),S=r(\"gxiY\"),_=r(\"avRv\"),N=r(\"nL36\"),A=r(\"NsEo\"),T=v.a.createElement;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(b.a)(e);if(t){var a=Object(b.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}!function(e){e.JOINED_THE_ROOM=\"JOINED_THE_ROOM\",e.JOIN_ROOM=\"JOIN_ROOM\",e.LEAVE_ROOM=\"LEAVE_ROOM\",e.STREAM_INFORMATION_CHANGED=\"private-stream/streamInformationChanged\"}(n||(n={}));var J=function(e){Object(d.a)(r,e);var t=M(r);function r(e){var n;return Object(c.a)(this,r),n=t.call(this,e),Object(p.a)(Object(l.a)(n),\"localVideoId\",\"group-publisher\"),Object(p.a)(Object(l.a)(n),\"remoteVideoContainerClassname\",\"group-video-container\"),Object(p.a)(Object(l.a)(n),\"mainVideoRef\",void 0),Object(p.a)(Object(l.a)(n),\"publisherRef\",void 0),Object(p.a)(Object(l.a)(n),\"subscriberRef\",void 0),Object(p.a)(Object(l.a)(n),\"socket\",void 0),Object(p.a)(Object(l.a)(n),\"streamId\",void 0),Object(p.a)(Object(l.a)(n),\"streamList\",void 0),Object(p.a)(Object(l.a)(n),\"onbeforeunload\",(function(){n.leaveSession()})),n.state={processing:!1,roomJoined:!1,total:0,members:[]},n}return Object(u.a)(r,[{key:\"componentDidMount\",value:function(){window.addEventListener(\"beforeunload\",this.onbeforeunload),k.a.events.on(\"routeChangeStart\",this.onbeforeunload),this.socket=this.context,this.publisherRef=v.a.createRef(),this.subscriberRef=v.a.createRef()}},{key:\"componentDidUpdate\",value:function(e){var t,r=this.props.activeConversation;null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t._id&&r!==e.activeConversation&&this.initSocketEvent()}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),k.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({total:r,members:n})}},{key:\"handleRemoteVideo\",value:function(e){var t=e.target.srcObject;this.mainVideoRef.current.srcObject=t,this.mainVideoRef.current.hidden=!1,this.mainVideoRef.current.play()}},{key:\"initSocketEvent\",value:function(){var e=this;this.socket=this.context,this.socket.on(\"JOINED_THE_ROOM\",(function(t){var r=t.streamId,n=t.streamList;t.conversationId===e.props.activeConversation.data._id&&(e.streamId=r,e.streamList=n,e.publisherRef.current&&e.publisherRef.current.publish(r),n.length&&e.subscriberRef.current&&e.subscriberRef.current.play(n))})),this.socket.on(\"private-stream/streamJoined\",(function(t){e.streamId!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.play([t.streamId])})),this.socket.on(\"private-stream/streamLeaved\",(function(t){e.streamList=e.streamList.filter((function(e){return e!==t.streamId})),e.streamId!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.close(t.streamId)}))}},{key:\"leaveSession\",value:function(){var e,t=this.props,r=t.activeConversation;(0,t.resetStreamMessage)(),this.socket&&null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e._id&&(this.socket.off(\"JOINED_THE_ROOM\"),this.socket.off(\"private-stream/streamJoined\"),this.socket.off(\"private-stream/streamLeaved\"),this.socket.emit(n.LEAVE_ROOM,{conversationId:r.data._id})),this.setState({processing:!1,roomJoined:!1,total:0,members:[]})}},{key:\"startConversation\",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,r,a,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getStreamConversationSuccess,e.prev=1,this.setState({processing:!0}),e.next=5,C.p.startGroupChat();case 5:(r=e.sent)&&r.data&&(a=r.data,o=a.sessionId,i=a.conversation,this.socket=this.context,this.publisherRef.current&&this.publisherRef.current.start(i._id,o),t({data:i}),this.socket&&this.socket.emit(n.JOIN_ROOM,{conversationId:r.data.conversation._id})),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,Promise.resolve(e.t0);case 13:c=e.sent,y.b.error(Object(A.g)(c));case 15:return e.prev=15,this.setState({processing:!1}),e.finish(15);case 18:case\"end\":return e.stop()}}),e,this,[[1,9,15,18]])})));return function(){return e.apply(this,arguments)}}()},{key:\"roomJoinedHandler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({roomJoined:!0,total:r,members:n})}},{key:\"leave\",value:function(){this.publisherRef.current&&this.publisherRef.current.stop(),this.subscriberRef.current&&this.subscriberRef.current.stop(),setTimeout((function(){window.location.href=\"/\"}),1e4)}},{key:\"render\",value:function(){var e=this.state,t=e.processing,r=e.total,o=e.members,s=e.roomJoined;return T(v.a.Fragment,null,T(O.a,null,T(\"title\",null,\"Group Chat\")),T(x.a,{event:n.STREAM_INFORMATION_CHANGED,handler:this.handler.bind(this)}),T(x.a,{event:n.JOINED_THE_ROOM,handler:this.roomJoinedHandler.bind(this)}),T(\"div\",{className:\"container\"},T(j.a,null,T(I.a,{md:12,xs:24},s?T(g.a,{type:\"primary\",onClick:this.leave.bind(this),block:!0,disabled:t},\"Stop Streaming\"):T(g.a,{type:\"primary\",onClick:this.startConversation.bind(this),loading:t,block:!0},\"Start Conversation\"),T(\"div\",{style:{display:\"flex\",justifyContent:\"center\"}},T(\"video\",{id:\"subscriber\",ref:this.mainVideoRef,hidden:!0,controls:!0})),T(j.a,{className:this.remoteVideoContainerClassname},T(_.a,Object(a.a)({},this.props,{id:this.localVideoId,containerClassName:this.remoteVideoContainerClassname,classNames:\"ant-col ant-col-6\",ref:this.publisherRef,configs:{localVideoId:this.localVideoId}})),T(N.a,Object(a.a)({},this.props,{ref:this.subscriberRef,containerClassName:this.remoteVideoContainerClassname,classNames:\"ant-col ant-col-6\",configs:{isPlayMode:!0}})))),T(I.a,{xs:24,md:12},T(E.a,Object(a.a)({},this.props,{totalParticipant:r,members:o}))))))}}]),r}(m.PureComponent);Object(p.a)(J,\"authenticate\",!0),Object(p.a)(J,\"onlyPerformer\",!0),J.contextType=x.c;var L={getStreamConversationSuccess:S.e,resetStreamMessage:S.l};t.default=Object(w.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({user:e.user.current,loggedIn:e.auth.loggedIn,activeConversation:e.streamMessage.activeConversation},e.streaming)}),L)(Object(R.withRouter)(J))},avRv:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),s=r(\"1OyB\"),i=r(\"vuIU\"),c=r(\"JX7q\"),u=r(\"Ji7U\"),l=r(\"md7G\"),d=r(\"foSv\"),f=r(\"rePB\"),b=r(\"CLrh\"),p=r(\"nOHt\"),m=r.n(p),v=r(\"TSYQ\"),h=r.n(v),O=r(\"q1tI\"),y=r.n(O),j=r(\"HQdG\"),I=r(\"MoJi\"),g=r(\"AY7M\"),R=y.a.createElement;function k(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var C=function(e){Object(u.a)(r,e);var t=k(r);function r(e){var n;return Object(s.a)(this,r),n=t.call(this,e),Object(f.a)(Object(c.a)(n),\"socket\",void 0),Object(f.a)(Object(c.a)(n),\"onbeforeunload\",(function(){var e=n.props,t=e.publish_started,r=e.webRTCAdaptor,a=n.state,o=a.conversationId,s=a.streamId;t&&(r&&r.leaveFromRoom(o),n.socket.emit(\"private-stream/leave\",{conversationId:o,streamId:s}))})),n.state={conversationId:\"\"},n}return Object(i.a)(r,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.id,r=e.containerClassName;this.socket=this.context,m.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload);var n=document.getElementById(t),a=document.getElementsByClassName(r)[0];n.width=a.clientWidth/4}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),m.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.webRTCAdaptor,o=r.settings,s=this.state,i=s.conversationId,c=s.streamId,t!==I.a.INITIALIZED){e.next=6;break}n.joinRoom(i,c),e.next=14;break;case 6:if(t!==I.a.JOINED_THE_ROOM){e.next=13;break}return e.next=9,b.p.getPublishToken({streamId:c,settings:o});case 9:u=e.sent,n.publish(c,u),e.next=14;break;case 13:\"publish_started\"===t?this.socket.emit(\"private-stream/join\",{conversationId:i,streamId:c}):\"publish_finished\"===t&&this.socket.emit(\"private-stream/leave\",{conversationId:i,streamId:c});case 14:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"start\",value:function(e){this.setState({conversationId:e})}},{key:\"publish\",value:function(e){var t=this.props.initWebRTCAdaptor;this.setState({streamId:e}),t(this.handler.bind(this))}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){var e=this.props,t=e.publish_started,r=e.id,n=e.classNames;return R(\"video\",{id:r,className:h()(\"video-js\",n),hidden:!t,autoPlay:!0,playsInline:!0,muted:!0})}}]),r}(O.PureComponent);C.contextType=g.c,t.a=Object(j.a)(C)},\"l+S1\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"}}]},name:\"search\",theme:\"outlined\"},o=r(\"6VBw\"),s=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};s.displayName=\"SearchOutlined\";t.a=n.forwardRef(s)},nL36:function(e,t,r){\"use strict\";var n=r(\"KQm4\"),a=r(\"o0o1\"),o=r.n(a),s=r(\"HaE+\"),i=r(\"1OyB\"),c=r(\"vuIU\"),u=r(\"JX7q\"),l=r(\"Ji7U\"),d=r(\"md7G\"),f=r(\"foSv\"),b=r(\"rePB\"),p=r(\"q1tI\"),m=r(\"CLrh\"),v=r(\"TSYQ\"),h=r.n(v),O=r(\"HQdG\"),y=r(\"MoJi\"),j=p.createElement;function I(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var g=function(e){Object(l.a)(r,e);var t=I(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(b.a)(Object(u.a)(e),\"streamIds\",[]),Object(b.a)(Object(u.a)(e),\"availableStreamIds\",[]),e}return Object(c.a)(r,[{key:\"handler\",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,a,s,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.webRTCAdaptor,s=n.settings,t!==y.a.INITIALIZED){e.next=14;break}if(!Array.isArray(this.streamIds)){e.next=8;break}return e.next=5,Promise.all(this.streamIds.map((function(e){return m.p.getSubscriberToken({streamId:e,settings:s})})));case 5:return i=e.sent,this.streamIds.map((function(e,t){return a.play(e,i[t])})),e.abrupt(\"return\");case 8:return e.next=10,m.p.getSubscriberToken({streamId:this.streamIds,settings:s});case 10:c=e.sent,a.play(this.streamIds,c),e.next=31;break;case 14:if(t!==y.a.NEW_STREAM_AVAILABLE){e.next=19;break}this.availableStreamIds.find((function(e){return e===r.streamId}))||(this.availableStreamIds.push(r.streamId),this.createRemoteVideo(r)),e.next=31;break;case 19:if(t!==y.a.PLAY_FINISHED){e.next=25;break}this.availableStreamIds=this.availableStreamIds.filter((function(e){return e!==r.streamId})),this.removeRemoteVideo(r.streamId),setTimeout((function(){a.getStreamInfo(r.streamId)}),3e3),e.next=31;break;case 25:if(t!==y.a.STREAM_INFORMATION){e.next=31;break}if(!this.streamIds.includes(r.streamId)){e.next=31;break}return e.next=29,m.p.getSubscriberToken({streamId:r.streamId,settings:s});case 29:u=e.sent,a.play(r.streamId,u);case 31:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"cbErrorHandler\",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"no_stream_exist\"===t&&(r=this.props,n=r.webRTCAdaptor,a=r.initWebRTCAdaptor,n?this.streamIds.forEach((function(e){return n.getStreamInfo(e)})):a(this.handler.bind(this),this.cbErrorHandler.bind(this)));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"createRemoteVideo\",value:function(e){var t=e.stream,r=e.streamId,n=this.props,a=n.classNames,o=n.containerClassName,s=n.onClick,i=document.createElement(\"video\"),c=document.getElementsByClassName(o)[0];i.setAttribute(\"id\",\"streamId-subscriber-\".concat(r)),i.setAttribute(\"class\",h()(\"video-js\",a)),i.autoplay=!0,i.muted=!0,i.controls=!0,i.playsInline=!0,i.width=c.clientWidth/4,i.srcObject=t,i.addEventListener(\"click\",s),c.append(i)}},{key:\"removeRemoteVideo\",value:function(e){var t=this.props.containerClassName,r=document.getElementById(\"streamId-subscriber-\".concat(e));r&&(r.srcObject=null,document.getElementsByClassName(t)[0].removeChild(r))}},{key:\"play\",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,a,s,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.initWebRTCAdaptor,s=r.initialized,i=r.webRTCAdaptor,c=r.settings,this.streamIds=[].concat(Object(n.a)(this.streamIds),Object(n.a)(t)),!s){e.next=9;break}if(!Array.isArray(t)){e.next=8;break}return e.next=6,Promise.all(t.map((function(e){return m.p.getSubscriberToken({streamId:e,settings:c})})));case 6:u=e.sent,t.map((function(e,t){return i.play(e,u[t])}));case 8:return e.abrupt(\"return\");case 9:a(this.handler.bind(this),this.cbErrorHandler.bind(this));case 10:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"close\",value:function(e){this.streamIds=this.streamIds.filter((function(t){return t!==e}))}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){return j(p.Fragment,null)}}]),r}(p.PureComponent);t.a=Object(O.a)(g)},\"o/2+\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a=Object(n.createContext)({});t.a=a},qrJ5:function(e,t,r){\"use strict\";var n=r(\"wx14\"),a=r(\"rePB\"),o=r(\"U8pU\"),s=r(\"ODXe\"),i=r(\"q1tI\"),c=r(\"TSYQ\"),u=r.n(c),l=r(\"H84U\"),d=r(\"o/2+\"),f=r(\"CWQg\"),b=r(\"ACnJ\"),p=r(\"R3zJ\"),m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},v=(Object(f.a)(\"top\",\"middle\",\"bottom\",\"stretch\"),Object(f.a)(\"start\",\"end\",\"center\",\"space-around\",\"space-between\"),i.forwardRef((function(e,t){var r,c=e.prefixCls,f=e.justify,v=e.align,h=e.className,O=e.style,y=e.children,j=e.gutter,I=void 0===j?0:j,g=e.wrap,R=m(e,[\"prefixCls\",\"justify\",\"align\",\"className\",\"style\",\"children\",\"gutter\",\"wrap\"]),k=i.useContext(l.b),C=k.getPrefixCls,w=k.direction,x=i.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),E=Object(s.a)(x,2),S=E[0],_=E[1],N=i.useRef(I);i.useEffect((function(){var e=b.a.subscribe((function(e){var t=N.current||0;(!Array.isArray(t)&&\"object\"===Object(o.a)(t)||Array.isArray(t)&&(\"object\"===Object(o.a)(t[0])||\"object\"===Object(o.a)(t[1])))&&_(e)}));return function(){return b.a.unsubscribe(e)}}),[]);var A=C(\"row\",c),T=function(){var e=[0,0];return(Array.isArray(I)?I:[I,0]).forEach((function(t,r){if(\"object\"===Object(o.a)(t))for(var n=0;n<b.b.length;n++){var a=b.b[n];if(S[a]&&void 0!==t[a]){e[r]=t[a];break}}else e[r]=t||0})),e}(),P=u()(A,(r={},Object(a.a)(r,\"\".concat(A,\"-no-wrap\"),!1===g),Object(a.a)(r,\"\".concat(A,\"-\").concat(f),f),Object(a.a)(r,\"\".concat(A,\"-\").concat(v),v),Object(a.a)(r,\"\".concat(A,\"-rtl\"),\"rtl\"===w),r),h),M={},J=T[0]>0?T[0]/-2:void 0,L=T[1]>0?T[1]/-2:void 0;if(M.marginLeft=J,M.marginRight=J,Object(p.b)()){var B=Object(s.a)(T,2);M.rowGap=B[1]}else M.marginTop=L,M.marginBottom=L;return i.createElement(d.a.Provider,{value:{gutter:T,wrap:g}},i.createElement(\"div\",Object(n.a)({},R,{className:P,style:Object(n.a)(Object(n.a)({},M),O),ref:t}),y))})));v.displayName=\"Row\",t.a=v}},[[\"TUqg\",0,1,4,5,3,2,6,7,10,9,11,12,13,14,15,16,17,19,22,25,26,28,33,41,8]]]);","extractedComments":[]}
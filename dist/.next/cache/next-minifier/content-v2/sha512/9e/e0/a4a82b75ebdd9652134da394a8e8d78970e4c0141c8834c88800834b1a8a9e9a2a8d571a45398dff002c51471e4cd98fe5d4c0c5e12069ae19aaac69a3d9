{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[105],{\"/kpp\":function(e,t,r){\"use strict\";var n=r(\"rePB\"),a=r(\"wx14\"),o=r(\"U8pU\"),i=r(\"q1tI\"),c=r(\"TSYQ\"),s=r.n(c),u=r(\"o/2+\"),l=r(\"H84U\"),f=r(\"R3zJ\"),d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};var p=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],b=i.forwardRef((function(e,t){var r,c=i.useContext(l.b),b=c.getPrefixCls,v=c.direction,h=i.useContext(u.a),m=h.gutter,O=h.wrap,y=e.prefixCls,j=e.span,I=e.order,R=e.offset,g=e.push,w=e.pull,k=e.className,E=e.children,x=e.flex,S=e.style,C=d(e,[\"prefixCls\",\"span\",\"order\",\"offset\",\"push\",\"pull\",\"className\",\"children\",\"flex\",\"style\"]),_=b(\"col\",y),P={};p.forEach((function(t){var r,i={},c=e[t];\"number\"===typeof c?i.span=c:\"object\"===Object(o.a)(c)&&(i=c||{}),delete C[t],P=Object(a.a)(Object(a.a)({},P),(r={},Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-\").concat(i.span),void 0!==i.span),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-order-\").concat(i.order),i.order||0===i.order),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-offset-\").concat(i.offset),i.offset||0===i.offset),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-push-\").concat(i.push),i.push||0===i.push),Object(n.a)(r,\"\".concat(_,\"-\").concat(t,\"-pull-\").concat(i.pull),i.pull||0===i.pull),Object(n.a)(r,\"\".concat(_,\"-rtl\"),\"rtl\"===v),r))}));var T=s()(_,(r={},Object(n.a)(r,\"\".concat(_,\"-\").concat(j),void 0!==j),Object(n.a)(r,\"\".concat(_,\"-order-\").concat(I),I),Object(n.a)(r,\"\".concat(_,\"-offset-\").concat(R),R),Object(n.a)(r,\"\".concat(_,\"-push-\").concat(g),g),Object(n.a)(r,\"\".concat(_,\"-pull-\").concat(w),w),r),k,P),A={};if(m&&m[0]>0){var N=m[0]/2;A.paddingLeft=N,A.paddingRight=N}if(m&&m[1]>0&&!Object(f.b)()){var M=m[1]/2;A.paddingTop=M,A.paddingBottom=M}return x&&(A.flex=function(e){return\"number\"===typeof e?\"\".concat(e,\" \").concat(e,\" auto\"):/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(e)?\"0 0 \".concat(e):e}(x),\"auto\"!==x||!1!==O||A.minWidth||(A.minWidth=0)),i.createElement(\"div\",Object(a.a)({},C,{style:Object(a.a)(Object(a.a)({},A),S),className:T,ref:t}),E)}));b.displayName=\"Col\",t.a=b},\"6cGi\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o}));var n=r(\"ODXe\"),a=r(\"q1tI\");function o(e,t){var r=t||{},o=r.defaultValue,i=r.value,c=r.onChange,s=r.postState,u=a.useState((function(){return void 0!==i?i:void 0!==o?\"function\"===typeof o?o():o:\"function\"===typeof e?e():e})),l=Object(n.a)(u,2),f=l[0],d=l[1],p=void 0!==i?i:f;s&&(p=s(p));var b=a.useRef(!0);return a.useEffect((function(){b.current?b.current=!1:void 0===i&&d(i)}),[i]),[p,function(e){d(e),p!==e&&c&&c(e,p)}]}},\"8Skl\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z\"}}]},name:\"down\",theme:\"outlined\"},o=r(\"6VBw\"),i=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"DownOutlined\";t.a=n.forwardRef(i)},E0jY:function(e,t,r){\"use strict\";r.r(t);var n,a=r(\"wx14\"),o=r(\"o0o1\"),i=r.n(o),c=r(\"HaE+\"),s=r(\"1OyB\"),u=r(\"vuIU\"),l=r(\"JX7q\"),f=r(\"Ji7U\"),d=r(\"md7G\"),p=r(\"foSv\"),b=r(\"rePB\"),v=r(\"q1tI\"),h=r.n(v),m=r(\"8Kt/\"),O=r.n(m),y=r(\"tsqr\"),j=r(\"BMrR\"),I=r(\"kPKH\"),R=r(\"2/Rp\"),g=r(\"nOHt\"),w=r.n(g),k=r(\"CLrh\"),E=r(\"/MKj\"),x=r(\"PqZw\"),S=r(\"AY7M\"),C=r(\"L/eJ\"),_=r(\"gxiY\"),P=r(\"yXQx\"),T=r(\"X4ip\"),A=r(\"NsEo\"),N=h.a.createElement;function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}!function(e){e.JOINED_THE_ROOM=\"JOINED_THE_ROOM\",e.JOIN_ROOM=\"JOIN_ROOM\",e.LEAVE_ROOM=\"LEAVE_ROOM\",e.STREAM_INFORMATION_CHANGED=\"private-stream/streamInformationChanged\"}(n||(n={}));var q=function(e){Object(f.a)(r,e);var t=J(r);function r(e){var n;return Object(s.a)(this,r),n=t.call(this,e),Object(b.a)(Object(l.a)(n),\"publisherRef\",void 0),Object(b.a)(Object(l.a)(n),\"subscriberRef\",void 0),Object(b.a)(Object(l.a)(n),\"socket\",void 0),Object(b.a)(Object(l.a)(n),\"streamId\",void 0),Object(b.a)(Object(l.a)(n),\"streamList\",void 0),Object(b.a)(Object(l.a)(n),\"onbeforeunload\",(function(){n.leaveSession()})),n.state={processing:!1,roomJoined:!1,total:0,members:[]},n}return Object(u.a)(r,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.router,r=e.accessPrivateRequest;window.addEventListener(\"beforeunload\",this.onbeforeunload),w.a.events.on(\"routeChangeStart\",this.onbeforeunload),this.socket=this.context,this.publisherRef=h.a.createRef(),this.subscriberRef=h.a.createRef(),r(t.query.id)}},{key:\"componentDidUpdate\",value:function(e){var t,r=this.props,n=r.router,a=r.activeConversation,o=r.accessPrivateRequest;e.router.query.id!==n.query.id&&(o(n.query.id),this.socket=this.context),null!==a&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t._id&&a!==e.activeConversation&&this.initSocketEvent()}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),w.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({total:r,members:n})}},{key:\"initSocketEvent\",value:function(){var e=this;this.socket=this.context,this.socket.on(\"JOINED_THE_ROOM\",(function(t){var r=t.streamId,n=t.streamList;t.conversationId===e.props.activeConversation.data._id&&(e.streamId=r,e.streamList=n,e.publisherRef.current&&e.publisherRef.current.publish(r),n.length&&e.subscriberRef.current&&e.subscriberRef.current.play(n[0]))})),this.socket.on(\"private-stream/streamJoined\",(function(t){e.streamId!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.play(t.streamId)})),this.socket.on(\"private-stream/streamLeaved\",(function(t){e.streamList=e.streamList.filter((function(e){return e!==t.streamId})),e.streamId!==t.streamId&&e.subscriberRef.current&&e.subscriberRef.current.close(),y.b.error(\"Private call has ended.\"),window.setTimeout((function(){w.a.push(\"/live\")}),1e3)}))}},{key:\"leaveSession\",value:function(){var e,t=this.props,r=t.activeConversation;(0,t.resetStreamMessage)(),this.socket&&null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e._id&&(this.socket.off(\"JOINED_THE_ROOM\"),this.socket.off(\"private-stream/streamJoined\"),this.socket.off(\"private-stream/streamLeaved\"),this.socket.emit(n.LEAVE_ROOM,{conversationId:r.data._id})),this.setState({processing:!1,roomJoined:!1,total:0,members:[]})}},{key:\"acceptRequest\",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,r,a,o,c,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.router,a=t.getStreamConversationSuccess,r.query.id){e.next=3;break}return e.abrupt(\"return\");case 3:return e.prev=3,this.setState({processing:!0}),e.next=7,k.p.acceptPrivateChat(r.query.id.toString());case 7:(o=e.sent)&&o.data&&(this.socket=this.context,c=o.data,s=c.sessionId,u=c.conversation,this.socket&&this.socket.emit(n.JOIN_ROOM,{conversationId:u._id}),this.publisherRef.current&&this.publisherRef.current.start(u._id,s),a({data:u})),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,Promise.resolve(e.t0);case 15:l=e.sent,y.b.error(Object(A.g)(l));case 17:return e.prev=17,this.setState({processing:!1}),e.finish(17);case 20:case\"end\":return e.stop()}}),e,this,[[3,11,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:\"roomJoinedHandler\",value:function(e){var t,r=e.total,n=e.members,a=e.conversationId,o=this.props.activeConversation;null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t._id&&a===o.data._id&&this.setState({roomJoined:!0,total:r,members:n})}},{key:\"leave\",value:function(){this.publisherRef.current&&this.publisherRef.current.stop(),this.subscriberRef.current&&this.subscriberRef.current.stop(),setTimeout((function(){window.location.href=\"/\"}),1e4)}},{key:\"render\",value:function(){var e=this.state,t=e.processing,r=e.total,o=e.members,i=e.roomJoined;return N(h.a.Fragment,null,N(O.a,null,N(\"title\",null,\"Private Chat\")),N(S.a,{event:n.STREAM_INFORMATION_CHANGED,handler:this.handler.bind(this)}),N(S.a,{event:n.JOINED_THE_ROOM,handler:this.roomJoinedHandler.bind(this)}),N(\"div\",{className:\"container\"},N(j.a,null,N(I.a,{md:12,xs:24},i?N(R.a,{type:\"primary\",onClick:this.leave.bind(this),block:!0,disabled:t},\"Stop Streaming\"):N(R.a,{type:\"primary\",onClick:this.acceptRequest.bind(this),loading:t,block:!0},\"Accept Private Call Request\"),N(\"div\",{className:\"private-streaming-container \"},N(P.a,Object(a.a)({},this.props,{ref:this.publisherRef,configs:{localVideoId:\"private-publisher\"}})),N(T.a,Object(a.a)({},this.props,{ref:this.subscriberRef,configs:{isPlayMode:!0}})))),N(I.a,{xs:24,md:12},N(C.a,Object(a.a)({},this.props,{totalParticipant:r,members:o}))))))}}],[{key:\"getInitialProps\",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.ctx).query.id){e.next=7;break}return w.a.push(\"/\"),e.abrupt(\"return\");case 5:r.res.writeHead&&r.res.writeHead(302,{Location:\"/\"}),r.res.end&&r.res.end();case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(v.PureComponent);Object(b.a)(q,\"authenticate\",!0),Object(b.a)(q,\"onlyPerformer\",!0),q.contextType=S.c;var L={accessPrivateRequest:x.a,getStreamConversationSuccess:_.e,resetStreamMessage:_.l};t.default=Object(E.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({user:e.user.current,loggedIn:e.auth.loggedIn,activeConversation:e.streamMessage.activeConversation},e.streaming)}),L)(Object(g.withRouter)(q))},PqZw:function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return a})),r.d(t,\"a\",(function(){return o})),r.d(t,\"c\",(function(){return i}));var n=r(\"vo7w\"),a=Object(n.a)(\"ADD_PRIVATE_REQUEST\"),o=Object(n.a)(\"ACCESS_PRIVATE_REQUSET\"),i=Object(n.a)(\"UPDATE_LIVE_STREAM_SETTINGS\")},R3zJ:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o})),r.d(t,\"b\",(function(){return i}));var n,a=r(\"MNnm\"),o=function(){return Object(a.a)()&&window.document.documentElement},i=function(){if(!o())return!1;if(void 0!==n)return n;var e=document.createElement(\"div\");return e.style.display=\"flex\",e.style.flexDirection=\"column\",e.style.rowGap=\"1px\",e.appendChild(document.createElement(\"div\")),e.appendChild(document.createElement(\"div\")),document.body.appendChild(e),n=1===e.scrollHeight,document.body.removeChild(e),n}},X4ip:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),i=r(\"1OyB\"),c=r(\"vuIU\"),s=r(\"JX7q\"),u=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),d=r(\"rePB\"),p=r(\"q1tI\"),b=r(\"CLrh\"),v=r(\"TSYQ\"),h=r.n(v),m=r(\"HQdG\"),O=r(\"MoJi\"),y=(r(\"8Gf7\"),p.createElement);function j(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var I=function(e){Object(u.a)(r,e);var t=j(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(s.a)(e),\"streamId\",void 0),Object(d.a)(Object(s.a)(e),\"activeStreams\",[]),e}return Object(c.a)(r,[{key:\"handler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,i,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,o=n.webRTCAdaptor,i=n.settings,t!==O.a.INITIALIZED){e.next=8;break}return e.next=4,b.p.getSubscriberToken({streamId:this.streamId,settings:i});case 4:c=e.sent,o.play(this.streamId,c),e.next=25;break;case 8:if(t!==O.a.NEW_STREAM_AVAILABLE){e.next=13;break}this.activeStreams.find((function(e){return e===r.streamId}))||(this.activeStreams.push(r.streamId),this.createRemoteVideo(r.stream)),e.next=25;break;case 13:if(t!==O.a.PLAY_FINISHED){e.next=19;break}this.activeStreams=this.activeStreams.filter((function(e){return e!==r.streamId})),this.removeRemoteVideo(),setTimeout((function(){o.getStreamInfo(r.streamId)}),3e3),e.next=25;break;case 19:if(t!==O.a.STREAM_INFORMATION){e.next=25;break}if(r.streamId!==this.streamId){e.next=25;break}return e.next=23,b.p.getSubscriberToken({streamId:r.streamId,settings:i});case 23:s=e.sent,o.play(r.streamId,s);case 25:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"cbErrorHandler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"no_stream_exist\"===t&&(r=this.props,n=r.webRTCAdaptor,o=r.initWebRTCAdaptor,n?this.streamId&&n.getStreamInfo(this.streamId):o(this.handler.bind(this),this.cbErrorHandler.bind(this)));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"createRemoteVideo\",value:function(e){var t=this.props.classNames,r=document.createElement(\"video\");r.setAttribute(\"id\",\"private-subscriber\"),r.setAttribute(\"class\",h()(\"video-js\",t)),r.autoplay=!0,r.muted=!0,r.controls=!0,r.playsInline=!0,r.srcObject=e,document.querySelector(\".private-streaming-container\").append(r)}},{key:\"removeRemoteVideo\",value:function(){var e=document.getElementById(\"private-subscriber\");e&&(e.srcObject=null,document.querySelector(\".private-streaming-container\").removeChild(e))}},{key:\"play\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,i,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.initWebRTCAdaptor,o=r.initialized,i=r.webRTCAdaptor,c=r.settings,!o){e.next=7;break}return e.next=4,b.p.getSubscriberToken({streamId:t,settings:c});case 4:return s=e.sent,i.play(t,s),e.abrupt(\"return\");case 7:this.streamId=t,n(this.handler.bind(this),this.cbErrorHandler.bind(this));case 9:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"close\",value:function(){this.streamId=null}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){return y(p.Fragment,null)}}]),r}(p.PureComponent);t.a=Object(m.a)(I)},hwoL:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/live/webrtc/privatechat\",function(){return r(\"E0jY\")}])},\"l+S1\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"}}]},name:\"search\",theme:\"outlined\"},o=r(\"6VBw\"),i=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"SearchOutlined\";t.a=n.forwardRef(i)},\"o/2+\":function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a=Object(n.createContext)({});t.a=a},qrJ5:function(e,t,r){\"use strict\";var n=r(\"wx14\"),a=r(\"rePB\"),o=r(\"U8pU\"),i=r(\"ODXe\"),c=r(\"q1tI\"),s=r(\"TSYQ\"),u=r.n(s),l=r(\"H84U\"),f=r(\"o/2+\"),d=r(\"CWQg\"),p=r(\"ACnJ\"),b=r(\"R3zJ\"),v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},h=(Object(d.a)(\"top\",\"middle\",\"bottom\",\"stretch\"),Object(d.a)(\"start\",\"end\",\"center\",\"space-around\",\"space-between\"),c.forwardRef((function(e,t){var r,s=e.prefixCls,d=e.justify,h=e.align,m=e.className,O=e.style,y=e.children,j=e.gutter,I=void 0===j?0:j,R=e.wrap,g=v(e,[\"prefixCls\",\"justify\",\"align\",\"className\",\"style\",\"children\",\"gutter\",\"wrap\"]),w=c.useContext(l.b),k=w.getPrefixCls,E=w.direction,x=c.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),S=Object(i.a)(x,2),C=S[0],_=S[1],P=c.useRef(I);c.useEffect((function(){var e=p.a.subscribe((function(e){var t=P.current||0;(!Array.isArray(t)&&\"object\"===Object(o.a)(t)||Array.isArray(t)&&(\"object\"===Object(o.a)(t[0])||\"object\"===Object(o.a)(t[1])))&&_(e)}));return function(){return p.a.unsubscribe(e)}}),[]);var T=k(\"row\",s),A=function(){var e=[0,0];return(Array.isArray(I)?I:[I,0]).forEach((function(t,r){if(\"object\"===Object(o.a)(t))for(var n=0;n<p.b.length;n++){var a=p.b[n];if(C[a]&&void 0!==t[a]){e[r]=t[a];break}}else e[r]=t||0})),e}(),N=u()(T,(r={},Object(a.a)(r,\"\".concat(T,\"-no-wrap\"),!1===R),Object(a.a)(r,\"\".concat(T,\"-\").concat(d),d),Object(a.a)(r,\"\".concat(T,\"-\").concat(h),h),Object(a.a)(r,\"\".concat(T,\"-rtl\"),\"rtl\"===E),r),m),M={},J=A[0]>0?A[0]/-2:void 0,q=A[1]>0?A[1]/-2:void 0;if(M.marginLeft=J,M.marginRight=J,Object(b.b)()){var L=Object(i.a)(A,2);M.rowGap=L[1]}else M.marginTop=q,M.marginBottom=q;return c.createElement(f.a.Provider,{value:{gutter:A,wrap:R}},c.createElement(\"div\",Object(n.a)({},g,{className:N,style:Object(n.a)(Object(n.a)({},M),O),ref:t}),y))})));h.displayName=\"Row\",t.a=h},yXQx:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),i=r(\"1OyB\"),c=r(\"vuIU\"),s=r(\"JX7q\"),u=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),d=r(\"rePB\"),p=r(\"CLrh\"),b=r(\"nOHt\"),v=r.n(b),h=r(\"q1tI\"),m=r.n(h),O=r(\"HQdG\"),y=r(\"MoJi\"),j=r(\"AY7M\"),I=(r(\"8Gf7\"),m.a.createElement);function R(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var g=function(e){Object(u.a)(r,e);var t=R(r);function r(e){var n;return Object(i.a)(this,r),n=t.call(this,e),Object(d.a)(Object(s.a)(n),\"socket\",void 0),Object(d.a)(Object(s.a)(n),\"onbeforeunload\",(function(){var e=n.props,t=e.publish_started,r=e.webRTCAdaptor,a=n.state,o=a.conversationId,i=a.streamId;t&&(r&&r.leaveFromRoom(o),n.socket.emit(\"private-stream/leave\",{conversationId:o,streamId:i}))})),n.state={conversationId:\"\"},n}return Object(c.a)(r,[{key:\"componentDidMount\",value:function(){this.socket=this.context,v.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),v.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,i,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.webRTCAdaptor,o=r.settings,i=this.state,c=i.conversationId,s=i.streamId,t!==y.a.INITIALIZED){e.next=6;break}n.joinRoom(c,s),e.next=14;break;case 6:if(t!==y.a.JOINED_THE_ROOM){e.next=13;break}return e.next=9,p.p.getPublishToken({streamId:s,settings:o});case 9:u=e.sent,n.publish(s,u),e.next=14;break;case 13:\"publish_started\"===t?this.socket.emit(\"private-stream/join\",{conversationId:c,streamId:s}):\"publish_finished\"===t&&this.socket.emit(\"private-stream/leave\",{conversationId:c,streamId:s});case 14:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"start\",value:function(e){this.setState({conversationId:e})}},{key:\"publish\",value:function(e){var t=this.props.initWebRTCAdaptor;this.setState({streamId:e}),t(this.handler.bind(this))}},{key:\"stop\",value:function(){(0,this.props.leaveSession)()}},{key:\"render\",value:function(){var e=this.props.publish_started;return I(\"video\",{id:\"private-publisher\",hidden:!e,autoPlay:!0,playsInline:!0,muted:!0})}}]),r}(h.PureComponent);g.contextType=j.c,t.a=Object(O.a)(g)}},[[\"hwoL\",0,1,4,5,3,2,6,7,10,9,11,12,13,14,15,16,17,19,22,25,26,28,33,41,8]]]);","extractedComments":[]}